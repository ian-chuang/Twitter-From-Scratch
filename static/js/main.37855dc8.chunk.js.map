{"version":3,"sources":["firebase/config.js","components/layout/RoundButton.js","components/layout/Copyright.js","components/auth/Login.js","services/useStorage.js","components/layout/Avatar.js","components/layout/ProfileInput.js","components/layout/ProfileHeaderInput.js","components/auth/Signup.js","components/layout/Image.js","services/firebase.js","components/PrimaryColumn/CreateTweet.js","components/layout/CreateTweetModal.js","redux/actions/index.js","components/layout/Navigation.js","components/PrimaryColumn/PrimaryColumn.js","components/PrimaryColumn/Header.js","services/timeDifference.js","components/PrimaryColumn/Tweet.js","components/PrimaryColumn/Timeline.js","components/SecondaryColumn/SecondaryColumn.js","components/SecondaryColumn/Search.js","components/SecondaryColumn/Activity.js","components/layout/FollowButton.js","components/SecondaryColumn/FollowMenu.js","components/PrimaryColumn/Welcome.js","components/pages/Home.js","components/pages/Explore.js","components/layout/EditProfileButton.js","components/PrimaryColumn/Profile.js","components/PrimaryColumn/ProfileNotFound.js","components/pages/ProfilePage.js","components/PrimaryColumn/MainTweet.js","components/pages/TweetPage.js","components/pages/NotFound.js","components/helpers/PrivateRoute.js","components/PrimaryColumn/LargeFollowMenu.js","components/pages/Connect.js","components/PrimaryColumn/LargeActivity.js","components/pages/ActivityPage.js","components/pages/Settings.js","App.js","redux/reducers/user.js","redux/reducers/theme.js","redux/reducers/index.js","index.js"],"names":["app","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","REACT_APP_MEASUREMENT_ID","auth","firestore","storage","useStyles","makeStyles","theme","button","borderRadius","textTransform","fontWeight","minWidth","RoundButton","children","className","other","classes","Button","clsx","Copyright","props","Box","Typography","variant","color","Date","getFullYear","root","minHeight","display","flexDirection","main","flexGrow","image","backgroundSize","backgroundPosition","justifyContent","alignItems","padding","spacing","imageLogo","width","height","maxWidth","fill","authGrid","margin","form","submit","paddingTop","paddingBottom","fontSize","links","gap","footer","flexWrap","Login","useState","email","setEmail","password","setPassword","error","setError","loading","setLoading","history","useHistory","ScalableTwitterIcon","focusable","viewBox","aria-hidden","d","handleSubmit","e","a","preventDefault","signInWithEmailAndPassword","push","message","Grid","container","component","Hidden","xsDown","item","sm","md","lg","style","backgroundImage","xs","mt","my","Alert","severity","onSubmit","noValidate","TextField","fullWidth","label","type","autoFocus","value","onChange","target","size","disabled","Link","onClick","textAlign","map","text","i","useStorage","defaultPreview","preview","setPreview","file","setFile","useEffect","objectUrl","URL","createObjectURL","revokeObjectURL","handleInputImage","files","length","removeImage","uploadImage","storageRef","ref","uuidv4","name","put","then","getDownloadURL","url","profilePicture","Avatar","src","rest","aspectRatio","position","center","top","left","transform","iconButton","backgroundColor","ProfileInput","profilePreview","handleProfileInputImage","removeProfileImage","IconButton","hidden","header","palette","grey","pictureContainer","marginBottom","alignSelf","marginTop","marginLeft","borderStyle","borderWidth","borderColor","background","default","ProfileHeaderInput","headerPreview","handleHeaderInputImage","removeHeaderImage","pb","content","overflow","primaryText","typography","h5","primary","fontWeightBold","secondaryText","body2","secondary","buttons","Signup","setName","biography","setBiography","username","setUsername","uploadProfileImage","uploadHeaderImage","activeStep","setActiveStep","steps","handleNext","stepErrorHandling","signup","createUserWithEmailAndPassword","user","collection","doc","uid","set","FieldValue","serverTimestamp","newUser","following","followers","likes","retweets","createdAt","headerImageURL","profilePictureURL","step","test","where","get","docs","exists","Container","mb","inputProps","maxLength","multiline","getStepContent","prevActiveStep","objectFit","cursor","closeButton","modal","overflowY","modalImage","Image","contain","showModal","open","setOpen","handleCloseModal","handleOpenModal","stopPropagation","alt","maxHeight","Modal","onClose","BackdropProps","m","fetchHomeTimeline","setTimeline","unsubscribe","orderBy","onSnapshot","result","tweets","data","id","fetchUser","snapshot","addActivity","add","timestamp","textField","marginRight","progress","CreateTweet","divider","minRows","onSend","parent","useTheme","useSelector","state","setMessage","setProgress","tweetOptions","icon","action","handleSendTweet","imageUrl","replies","disableButton","placeholder","InputProps","disableUnderline","maxRows","option","Tooltip","title","arrow","aria-label","React","cloneElement","CircularProgress","Math","min","thickness","Divider","right","CreateTweetModal","handleClose","p","setUser","payload","setFirebaseUser","firebaseUser","breakpoints","up","flex","down","logo","navLink","navText","tweetButtonLg","tweetButtonSm","Navigation","dispatch","useDispatch","handleOpen","menuItems","signOut","catch","err","console","log","mdDown","lgUp","PrimaryColumn","orientation","flexItem","zIndex","appBar","backButton","Header","py","px","goBack","timeDifference","msPerMinute","msPerHour","msPerDay","elapsed","round","toLocaleString","month","getDate","tweet","tweetInfo","tweetMessage","whiteSpace","tweetImage","Tweet","currentUser","setLikes","toggleLiked","setToggledLiked","setRetweets","toggleRetweet","setToggledRetweet","handleToggledLiked","update","arrayRemove","arrayUnion","handleToggledRetweet","includes","activated","noWrap","toDate","info","ml","Timeline","SecondaryColumn","copyright","smDown","Search","Paper","startAdornment","InputAdornment","list","listItem","showMore","avatar","Activity","activity","setActivity","limit","Promise","all","fetchActivityLimit","List","ListItem","ListItemText","href","textDecoration","FollowButton","toggleFollow","setToggledFollow","handleClick","FollowMenu","users","setUsers","FieldPath","documentId","ListItemSecondaryAction","Welcome","Home","timeline","Explore","inputs","EditProfileModal","document","date","verticalAlign","bio","Profile","dateJoined","mr","notFound","ProfileNotFound","ProfilePage","useParams","undefined","fetchUserSnapshot","fetchUserTimeline","forEach","fcn","MainTweet","hour","minute","hour12","slice","TweetPage","tweetid","setTweet","NotFound","PrivateRoute","Component","render","to","LargeFollowMenu","Connect","LargeActivity","fetchActivity","ActivityPage","Settings","listItems","toString","App","onAuthStateChanged","userInfo","ThemeProvider","CssBaseline","exact","path","initialState","darkTheme","createTheme","contrastText","paper","shadows","dimTheme","lightTheme","themeReducer","Reducers","combineReducers","store","createStore","rootReducer","applyMiddleware","thunk","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.37855dc8.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/storage\";\r\nimport \"firebase/firestore\";\r\n\r\nconst app = firebase.initializeApp({\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_APP_ID,\r\n  measurementId: process.env.REACT_APP_MEASUREMENT_ID,\r\n});\r\n\r\nconst auth = app.auth();\r\nconst firestore = app.firestore();\r\nconst storage = app.storage();\r\n\r\nexport { app, auth, firestore, storage };\r\n","import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    borderRadius: \"9999px\",\r\n    textTransform: \"none\",\r\n    fontWeight: 600,\r\n    minWidth: \"auto\",\r\n  },\r\n}));\r\n\r\nexport default function RoundButton({ children, className = \"\", ...other }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Button className={clsx(classes.button, className)} {...other}>\r\n      {children}\r\n    </Button>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nexport default function Copyright(props) {\r\n  return (\r\n    <Box {...props}>\r\n      <Typography variant=\"body2\" color=\"textSecondary\">\r\n        {\"Copyright  Ian Chuang \"}\r\n        {new Date().getFullYear()}\r\n        {\".\"}\r\n      </Typography>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { auth } from \"../../firebase/config\";\r\nimport RoundButton from \"../layout/RoundButton\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport TwitterIcon from \"@material-ui/icons/Twitter\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Copyright from \"../layout/Copyright\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    minHeight: \"100vh\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n  },\r\n  main: {\r\n    flexGrow: 1,\r\n  },\r\n  image: {\r\n    backgroundSize: \"cover\",\r\n    backgroundPosition: \"center\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    padding: theme.spacing(2),\r\n  },\r\n  imageLogo: {\r\n    width: \"100%\",\r\n    height: \"60%\",\r\n    maxWidth: \"25rem\",\r\n    fill: \"#fff\",\r\n  },\r\n  authGrid: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n  auth: {\r\n    margin: theme.spacing(8, 4),\r\n    width: \"100%\",\r\n    maxWidth: \"32rem\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"flex-start\",\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(2, 0),\r\n    paddingTop: theme.spacing(1.5),\r\n    paddingBottom: theme.spacing(1.5),\r\n    fontSize: 18,\r\n  },\r\n  links: {\r\n    gap: theme.spacing(0.5),\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n  },\r\n  footer: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    gap: theme.spacing(2),\r\n    flexWrap: \"wrap\",\r\n    justifyContent: \"center\",\r\n  },\r\n}));\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  function ScalableTwitterIcon() {\r\n    return (\r\n      <svg\r\n        className={classes.imageLogo}\r\n        width=\"100%\"\r\n        focusable=\"false\"\r\n        viewBox=\"0 0 24 24\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <path d=\"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z\"></path>\r\n      </svg>\r\n    );\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    setError(null);\r\n    setLoading(true);\r\n\r\n    try {\r\n      await auth.signInWithEmailAndPassword(email, password);\r\n      history.push(\"/home\");\r\n    } catch (error) {\r\n      setError(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n      setEmail(\"\");\r\n      setPassword(\"\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <Grid container component=\"main\" className={classes.main}>\r\n        <Hidden xsDown>\r\n          <Grid item sm={4} md={6} lg={7} className={classes.image} style={{backgroundImage: `url(/auth_image.PNG)`}}>\r\n            <ScalableTwitterIcon />\r\n          </Grid>\r\n        </Hidden>\r\n\r\n        <Grid item xs={12} sm={8} md={6} lg={5} className={classes.authGrid}>\r\n          <div className={classes.auth}>\r\n            <TwitterIcon style={{ fontSize: 45 }} color=\"primary\" />\r\n            <Box fontWeight=\"fontWeightBold\" mt={3} fontSize=\"h4.fontSize\">\r\n              Log in to Twitter\r\n            </Box>\r\n            {error && (\r\n              <Box width=\"100%\" my={2}>\r\n                <Alert severity=\"error\">{error}</Alert>\r\n              </Box>\r\n            )}\r\n            <form onSubmit={handleSubmit} className={classes.form} noValidate>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                margin=\"normal\"\r\n                fullWidth\r\n                label=\"Email Address\"\r\n                type=\"email\"\r\n                autoFocus\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n              />\r\n              <TextField\r\n                variant=\"outlined\"\r\n                margin=\"normal\"\r\n                fullWidth\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n              />\r\n\r\n              <RoundButton\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                size=\"large\"\r\n                className={classes.submit}\r\n                disabled={loading}\r\n              >\r\n                Log in\r\n              </RoundButton>\r\n\r\n              <div className={classes.links}>\r\n                <Link\r\n                  variant=\"body1\"\r\n                  onClick={() => {\r\n                    history.push(\"/signup\");\r\n                  }}\r\n                >\r\n                  Forgot password?\r\n                </Link>\r\n                <Typography variant=\"body1\" color=\"textSecondary\">\r\n                  \r\n                </Typography>\r\n                <Link\r\n                  variant=\"body1\"\r\n                  onClick={() => {\r\n                    history.push(\"/signup\");\r\n                  }}\r\n                >\r\n                  Sign up for Twitter\r\n                </Link>\r\n              </div>\r\n\r\n              <Copyright mt={3} textAlign=\"center\" />\r\n            </form>\r\n          </div>\r\n        </Grid>\r\n      </Grid>\r\n      <div className={classes.footer}>\r\n        {[\r\n          \"About\",\r\n          \"Help Center\",\r\n          \"Terms of Service\",\r\n          \"Privacy Policy\",\r\n          \"Cookie Policy\",\r\n          \"Ads info\",\r\n          \"Blog\",\r\n          \"Status\",\r\n          \"Careers\",\r\n          \"Brand Resources\",\r\n          \"Advertising\",\r\n          \"Marketing\",\r\n          \"Twitter for Business\",\r\n          \"Developers\",\r\n          \"Directory\",\r\n          \"Settings\",\r\n        ].map((text, i) => (\r\n          <Link variant=\"body2\" color=\"textSecondary\" key={i}>\r\n            {text}\r\n          </Link>\r\n        ))}\r\n      </div>\r\n    </Box>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { storage } from \"../firebase/config\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nexport default function useStorage(defaultPreview = null) {\r\n  const [preview, setPreview] = useState(null);\r\n  const [file, setFile] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!file) {\r\n      setPreview(defaultPreview);\r\n      return;\r\n    }\r\n\r\n    const objectUrl = URL.createObjectURL(file);\r\n    setPreview(objectUrl);\r\n\r\n    return () => URL.revokeObjectURL(objectUrl);\r\n  }, [file, defaultPreview]);\r\n\r\n  const handleInputImage = (e) => {\r\n    if (!e.target.files || e.target.files.length === 0) {\r\n      setFile(null);\r\n      return;\r\n    }\r\n    setFile(e.target.files[0]);\r\n    e.target.value = \"\";\r\n  };\r\n\r\n  const removeImage = () => {\r\n    setPreview(null);\r\n    setFile(null);\r\n  };\r\n\r\n  const uploadImage = async () => {\r\n    if (file && preview) {\r\n      const storageRef = storage.ref(`${uuidv4()}-${file.name}`);\r\n\r\n      const url = await storageRef\r\n        .put(file)\r\n        .then(async () => await storageRef.getDownloadURL());\r\n\r\n      removeImage();\r\n\r\n      return url;\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  return [preview, file, handleInputImage, uploadImage, removeImage];\r\n}\r\n","import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  profilePicture: {\r\n    minHeight: theme.spacing(6),\r\n    minWidth: theme.spacing(6),\r\n    borderRadius: \"50%\",\r\n    backgroundSize: \"cover\",\r\n    backgroundPosition: \"center\",\r\n  },\r\n}));\r\n\r\nexport default function Avatar({ src, children, className, ...rest }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <Box\r\n      {...rest}\r\n      className={clsx(classes.profilePicture, className)}\r\n      style={{ backgroundImage: `url(${src ? src : \"/profile_picture.png\"})` }}\r\n    >\r\n      {children}\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Avatar from \"./Avatar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseRoundedIcon from \"@material-ui/icons/CloseRounded\";\r\nimport AddAPhotoRoundedIcon from \"@material-ui/icons/AddAPhotoRounded\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  profilePicture: {\r\n    maxWidth: \"15rem\",\r\n    width: \"100%\",\r\n    borderRadius: \"50%\",\r\n    height: \"auto\",\r\n    minWidth: \"5rem\",\r\n    aspectRatio: \"1/1\",\r\n    backgroundSize: \"cover\",\r\n    backgroundPosition: \"center\",\r\n    position: \"relative\",\r\n    margin: theme.spacing(0, \"auto\"),\r\n  },\r\n  center: {\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    display: \"flex\",\r\n    gap: theme.spacing(1),\r\n  },\r\n  iconButton: {\r\n    color: \"#fff\",\r\n    backgroundColor: \"rgba(15, 20, 25, 0.75)\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"rgba(39,44,48,.75)\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function ProfileInput({\r\n  profilePreview,\r\n  handleProfileInputImage,\r\n  removeProfileImage,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Avatar className={classes.profilePicture} src={profilePreview}>\r\n      <Box className={classes.center}>\r\n        <IconButton className={classes.iconButton} component=\"label\">\r\n          <input type=\"file\" onChange={handleProfileInputImage} hidden />\r\n          <AddAPhotoRoundedIcon />\r\n        </IconButton>\r\n        {profilePreview && (\r\n          <IconButton\r\n            className={classes.iconButton}\r\n            onClick={removeProfileImage}\r\n          >\r\n            <CloseRoundedIcon />\r\n          </IconButton>\r\n        )}\r\n      </Box>\r\n    </Avatar>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Avatar from \"./Avatar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseRoundedIcon from \"@material-ui/icons/CloseRounded\";\r\nimport AddAPhotoRoundedIcon from \"@material-ui/icons/AddAPhotoRounded\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  header: {\r\n    backgroundSize: \"cover\",\r\n    backgroundPosition: \"center\",\r\n    position: \"relative\",\r\n    backgroundColor: theme.palette.grey[600],\r\n  },\r\n  pictureContainer: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    alignItems: \"flex-start\",\r\n    justifyContent: \"space-between\",\r\n    marginBottom: theme.spacing(1),\r\n    gap: theme.spacing(1),\r\n  },\r\n  profilePicture: {\r\n    position: \"relative\",\r\n    borderRadius: \"50%\",\r\n    alignSelf: \"flex-end\",\r\n    width: \"25%\",\r\n    height: \"auto\",\r\n    minWidth: \"48px\",\r\n    aspectRatio: \"1/1\",\r\n    marginTop: \"-16%\",\r\n    marginBottom: \"-2px\",\r\n    marginLeft: theme.spacing(2),\r\n    borderStyle: \"solid\",\r\n    borderWidth: \"4px\",\r\n    borderColor: theme.palette.background.default,\r\n    backgroundSize: \"cover\",\r\n    backgroundPosition: \"center\",\r\n    backgroundColor: theme.palette.grey[600],\r\n  },\r\n  center: {\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    display: \"flex\",\r\n    gap: theme.spacing(1),\r\n  },\r\n  iconButton: {\r\n    padding: theme.spacing(1),\r\n    color: \"#fff\",\r\n    backgroundColor: \"rgba(15, 20, 25, 0.75)\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"rgba(39,44,48,.75)\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function ProfileHeaderInput({\r\n  profilePreview,\r\n  headerPreview,\r\n  handleProfileInputImage = null,\r\n  handleHeaderInputImage,\r\n  removeHeaderImage,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box width=\"100%\">\r\n      <Box\r\n        className={classes.header}\r\n        style={{ backgroundImage: `url(${headerPreview})` }}\r\n      >\r\n        <Box width=\"100%\" pb=\"33%\"></Box>\r\n        <Box className={classes.center}>\r\n          <IconButton className={classes.iconButton} component=\"label\">\r\n            <input type=\"file\" onChange={handleHeaderInputImage} hidden />\r\n            <AddAPhotoRoundedIcon fontSize=\"small\" />\r\n          </IconButton>\r\n          {headerPreview && (\r\n            <IconButton\r\n              className={classes.iconButton}\r\n              onClick={removeHeaderImage}\r\n            >\r\n              <CloseRoundedIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          )}\r\n        </Box>\r\n      </Box>\r\n      <Avatar className={classes.profilePicture} src={profilePreview}>\r\n        {handleProfileInputImage && (\r\n          <Box className={classes.center}>\r\n            <IconButton className={classes.iconButton} component=\"label\">\r\n              <input type=\"file\" onChange={handleProfileInputImage} hidden />\r\n              <AddAPhotoRoundedIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          </Box>\r\n        )}\r\n      </Avatar>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { auth, firestore } from \"../../firebase/config\";\r\nimport firebase from \"firebase/app\";\r\nimport Button from \"../layout/RoundButton\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport TwitterIcon from \"@material-ui/icons/Twitter\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport useStorage from \"../../services/useStorage\";\r\nimport ProfileInput from \"../layout/ProfileInput\";\r\nimport ProfileHeaderInput from \"../layout/ProfileHeaderInput\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    maxWidth: \"32rem\",\r\n    margin: theme.spacing(4, \"auto\"),\r\n  },\r\n  content: {\r\n    height: '30rem',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    overflow: 'auto',\r\n  },\r\n  primaryText: {\r\n    fontSize: theme.typography.h5.fontSize,\r\n    color: theme.palette.text.primary,\r\n    fontWeight: theme.typography.fontWeightBold,\r\n    marginBottom: theme.spacing(3),\r\n  },\r\n  secondaryText: {\r\n    fontSize: theme.typography.body2.fontSize,\r\n    color: theme.palette.text.secondary,\r\n    marginBottom: theme.spacing(4),\r\n  },\r\n  marginBottom: {\r\n    marginBottom: theme.spacing(3),\r\n  },\r\n  buttons: {\r\n    display: 'flex',\r\n    gap: theme.spacing(2),\r\n  },\r\n}));\r\n\r\n\r\nexport default function Signup() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  // user info\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [biography, setBiography] = useState(\"\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [\r\n    profilePreview,\r\n    profileFile,\r\n    handleProfileInputImage,\r\n    uploadProfileImage,\r\n    removeProfileImage,\r\n  ] = useStorage();\r\n  const [\r\n    headerPreview,\r\n    headerFile,\r\n    handleHeaderInputImage,\r\n    uploadHeaderImage,\r\n    removeHeaderImage,\r\n  ] = useStorage();\r\n\r\n  //stepper\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const steps = ['Create account', 'Set password', 'Add profile picture', 'Add header', 'Create bio', 'Set username'];\r\n\r\n  const handleNext = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    const error = await stepErrorHandling(activeStep);\r\n    if (error) {\r\n      setError(error);\r\n      return;\r\n    }\r\n\r\n    setError(null);\r\n\r\n    if (activeStep + 1 < steps.length) {\r\n      setActiveStep(activeStep + 1);\r\n    }\r\n    else {\r\n      signup();\r\n    }\r\n    \r\n  };\r\n\r\n  const handleBack = () => {\r\n    setError(null);\r\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n  };\r\n\r\n  const signup = async () => {\r\n      setError(null);\r\n      setLoading(true);\r\n\r\n      try {\r\n          const {user} = await auth.createUserWithEmailAndPassword(email, password)\r\n          \r\n          await firestore.collection('uid')\r\n          .doc(user.uid)\r\n          .set({\r\n            username : username,\r\n          })\r\n\r\n          const newUser = {\r\n            name: name,\r\n            email: email,\r\n            following: [],\r\n            followers: [],\r\n            likes: [],\r\n            retweets: [],\r\n            createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n            biography: biography,\r\n            headerImageURL: await uploadHeaderImage(),\r\n            profilePictureURL: await uploadProfileImage(),\r\n          }\r\n\r\n          await firestore.collection('users')\r\n          .doc(username)\r\n          .set(newUser)\r\n\r\n          history.push('/home');\r\n      }\r\n      catch (error) {\r\n          setError(error.message);\r\n          setActiveStep(0);\r\n      }\r\n      finally {\r\n          setLoading(false);\r\n      }\r\n  }\r\n\r\n  const getStepContent = (step) => {\r\n    switch (step) {\r\n      case 0:\r\n        return (\r\n          <>\r\n            <Box className={classes.primaryText}>\r\n              Create your account\r\n            </Box>\r\n            {error && <Box width=\"100%\" mb={2}><Alert severity=\"error\">{error}</Alert></Box>}\r\n            <TextField\r\n              className={classes.marginBottom}\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              label=\"Name\"\r\n              type=\"text\"\r\n              autoFocus\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n            />\r\n            <TextField\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              label=\"Email Address\"\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n            />\r\n          </>\r\n        );\r\n      case 1:\r\n        return (\r\n          <>\r\n            <Box\r\n              className={classes.primaryText}\r\n            >{`Youll need a password`}</Box>\r\n            <Box className={classes.secondaryText}>\r\n              Make sure it's 6 characters or more.\r\n            </Box>\r\n            {error && <Box width=\"100%\" mb={2}><Alert severity=\"error\">{error}</Alert></Box>}\r\n            <TextField\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              autoFocus\r\n            />\r\n          </>\r\n        );\r\n      case 2:\r\n        return (\r\n          <>\r\n            <Box className={classes.primaryText}\r\n            >\r\n              Pick a profile picture\r\n            </Box>\r\n            <Box className={classes.secondaryText}>\r\n                Have a favorite selfie? Upload it now.\r\n            </Box>\r\n            {error && <Box width=\"100%\" mb={2}><Alert severity=\"error\">{error}</Alert></Box>}\r\n            <ProfileInput\r\n              profilePreview={profilePreview}\r\n              handleProfileInputImage={handleProfileInputImage}\r\n              removeProfileImage={removeProfileImage}\r\n            />\r\n          </>\r\n        );\r\n      case 3:\r\n        return (\r\n          <>\r\n            <Box className={classes.primaryText}>\r\n              Pick a header\r\n            </Box>\r\n            <Box className={classes.secondaryText}>\r\n                People who visit your profile will see it. Show your style.\r\n            </Box>\r\n            {error && <Box width=\"100%\" mb={2}><Alert severity=\"error\">{error}</Alert></Box>}\r\n            <ProfileHeaderInput\r\n              profilePreview={profilePreview}\r\n              headerPreview={headerPreview}\r\n              handleHeaderInputImage={handleHeaderInputImage}\r\n              removeHeaderImage={removeHeaderImage}\r\n            />\r\n          </>\r\n        );\r\n      case 4:\r\n        return (\r\n          <>\r\n            <Box className={classes.primaryText}>\r\n              Describe yourself\r\n            </Box>\r\n            <Box className={classes.secondaryText}>\r\n              What makes you special? Don't think too hard, just have fun with it.\r\n            </Box>\r\n            {error && <Box width=\"100%\" mb={2}><Alert severity=\"error\">{error}</Alert></Box>}\r\n            <TextField\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              label=\"Your bio\"\r\n              type=\"text\"\r\n              value={biography}\r\n              onChange={(e) => setBiography(e.target.value)}\r\n              inputProps={{ maxLength: 150 }}\r\n              autoFocus\r\n              multiline\r\n            />\r\n          </>\r\n        );\r\n      case 5:\r\n        return (\r\n          <>\r\n            <Box className={classes.primaryText}\r\n            >\r\n              What should we call you?\r\n            </Box>\r\n            <Box className={classes.secondaryText}>\r\n              Your @username is unique.\r\n            </Box>\r\n\r\n            {error && <Box width=\"100%\" mb={2}><Alert severity=\"error\">{error}</Alert></Box>}\r\n              \r\n            <TextField\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              label=\"Username\"\r\n              type=\"text\"\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n              autoFocus\r\n            />\r\n          </>\r\n        );\r\n      default:\r\n        return \"Unknown step\";\r\n    }\r\n  }\r\n\r\n  const stepErrorHandling = async (step) => {\r\n    switch (step) {\r\n      case 0:\r\n        if (name.length === 0) return 'Name is required.'\r\n        if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(email)) return 'Invalid email address.';\r\n        const query1 = await firestore.collection('users').where('email', '==', email).get()\r\n        if (query1.docs.length !== 0) return 'Your email is already taken.'\r\n        break;\r\n      case 1:\r\n        if (password.length <= 6) return 'Password must be greater than 6 characters.';\r\n        break;\r\n      case 2:\r\n        break;\r\n      case 3:\r\n        break;\r\n      case 4:\r\n        break;\r\n      case 5:\r\n        if (username.length === 0) return 'Username is required.';\r\n        if (!/^\\S*$/.test(username)) return 'No spaces are allowed in your username.'\r\n        const query2 = await firestore.collection(\"users\").doc(username).get()\r\n        if (query2.exists) return 'Your username is already taken.';\r\n        break;\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Box className={classes.root}>\r\n        <form onSubmit={handleNext}>\r\n          <Box mb={3}>\r\n            <IconButton color=\"primary\" onClick={() => history.push('/login')}>\r\n              <TwitterIcon style={{ fontSize: 45 }} />\r\n            </IconButton>\r\n            \r\n            <Box className={classes.content}>\r\n              \r\n              <Box flexGrow={1} my={4}>\r\n                {getStepContent(activeStep)}\r\n              </Box>\r\n\r\n              <div className={classes.buttons}>\r\n                {activeStep !== 0 && \r\n                    <Button size=\"large\" onClick={handleBack} variant=\"contained\" color=\"secondary\" fullWidth>\r\n                      Back\r\n                    </Button>\r\n                }\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={handleNext}\r\n                  size=\"large\"\r\n                  type=\"submit\"\r\n                  fullWidth\r\n                  disabled={loading}\r\n                >\r\n                  {activeStep === steps.length - 1 ? 'Sign up' : 'Next'}\r\n                </Button>\r\n              </div>\r\n            </Box>\r\n          </Box>\r\n        </form>\r\n      </Box>\r\n      \r\n    </Container>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport RoundButton from \"./RoundButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  image: {\r\n    width: \"100%\",\r\n    objectFit: \"cover\",\r\n    borderRadius: \"1rem\",\r\n    cursor: \"pointer\",\r\n  },\r\n  closeButton: {\r\n    position: \"absolute\",\r\n    top: theme.spacing(1),\r\n    left: theme.spacing(1),\r\n    padding: theme.spacing(0.75),\r\n    color: \"#fff\",\r\n    backgroundColor: \"rgba(15, 20, 25, 0.75)\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"rgba(39,44,48,.75)\",\r\n    },\r\n  },\r\n  modal: {\r\n    overflowY: \"auto\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  modalImage: {\r\n    maxWidth: \"50rem\",\r\n    width: \"100%\",\r\n    borderRadius: \"1rem\",\r\n  },\r\n}));\r\n\r\nexport default function Image({\r\n  src,\r\n  removeImage = null,\r\n  contain = true,\r\n  showModal = true,\r\n  ...props\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleCloseModal = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleOpenModal = (e) => {\r\n    e.stopPropagation();\r\n    setOpen(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {src && (\r\n        <>\r\n          <Box position=\"relative\" {...props}>\r\n            <img\r\n              src={src}\r\n              alt=\"Twitter Image...\"\r\n              className={classes.image}\r\n              onClick={showModal ? handleOpenModal : null}\r\n              style={{ maxHeight: contain ? \"18rem\" : \"auto\" }}\r\n            />\r\n            {removeImage && (\r\n              <RoundButton\r\n                className={classes.closeButton}\r\n                variant=\"contained\"\r\n                onClick={removeImage}\r\n              >\r\n                <CloseIcon fontSize=\"small\" />\r\n              </RoundButton>\r\n            )}\r\n          </Box>\r\n\r\n          {showModal && (\r\n            <Modal\r\n              open={open}\r\n              onClose={handleCloseModal}\r\n              BackdropProps={{\r\n                style: { backgroundColor: \"rgba(91, 112, 131, 0.4)\" },\r\n              }}\r\n              className={classes.modal}\r\n            >\r\n              <Box position=\"relative\" m=\"auto\">\r\n                <img\r\n                  src={src}\r\n                  alt=\"Twitter Image...\"\r\n                  className={classes.modalImage}\r\n                  onClick={handleOpenModal}\r\n                />\r\n                <RoundButton\r\n                  className={classes.closeButton}\r\n                  variant=\"contained\"\r\n                  onClick={handleCloseModal}\r\n                >\r\n                  <CloseIcon />\r\n                </RoundButton>\r\n              </Box>\r\n            </Modal>\r\n          )}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { firestore } from \"../firebase/config\";\r\nimport firebase from \"firebase/app\";\r\n\r\nexport function fetchHomeTimeline(user, setTimeline) {\r\n  let unsubscribe = () => {};\r\n  if (user.following.length > 0) {\r\n    unsubscribe = firestore\r\n      .collection(\"tweets\")\r\n      .where(\"parent\", \"==\", null)\r\n      .where(\"username\", \"in\", [user.username, ...user.following])\r\n      .orderBy(\"timestamp\", \"desc\")\r\n      .onSnapshot((result) => {\r\n        const tweets = result.docs.map((doc) => {\r\n          const data = doc.data();\r\n          const id = doc.id;\r\n\r\n          return { id, ...data };\r\n        });\r\n\r\n        setTimeline(tweets);\r\n      });\r\n  } else {\r\n    setTimeline([]);\r\n  }\r\n\r\n  return () => unsubscribe();\r\n}\r\n\r\nexport function fetchUserTimeline(username, setTimeline) {\r\n  const unsubscribe = firestore\r\n    .collection(\"tweets\")\r\n    .where(\"username\", \"==\", username)\r\n    .where(\"parent\", \"==\", null)\r\n    .orderBy(\"timestamp\", \"desc\")\r\n    .onSnapshot((snapshot) => {\r\n      setTimeline(\r\n        snapshot.docs.map((doc) => {\r\n          const data = doc.data();\r\n          const id = doc.id;\r\n          return { id, ...data };\r\n        })\r\n      );\r\n    });\r\n  return () => unsubscribe();\r\n}\r\n\r\nexport function fetchUserSnapshot(username, setUser) {\r\n  const unsubscribe = firestore\r\n    .collection(\"users\")\r\n    .doc(username)\r\n    .onSnapshot((snapshot) => {\r\n      if (snapshot.exists) {\r\n        setUser({ ...snapshot.data(), username: username });\r\n      } else {\r\n        setUser(undefined);\r\n      }\r\n    });\r\n  return () => unsubscribe();\r\n}\r\n\r\nexport function fetchUser(username) {\r\n  return firestore\r\n    .collection(\"users\")\r\n    .doc(username)\r\n    .get()\r\n    .then((snapshot) => {\r\n      if (snapshot.exists) {\r\n        return { ...snapshot.data(), username: username };\r\n      }\r\n    });\r\n}\r\n\r\nexport function fetchPeopleToFollow(user) {\r\n  return firestore\r\n    .collection(\"users\")\r\n    .where(firebase.firestore.FieldPath.documentId(), \"not-in\", [\r\n      user.username,\r\n      ...user.following,\r\n    ])\r\n    .get()\r\n    .then((result) => {\r\n      return result.docs.map((doc) => {\r\n        const username = doc.id;\r\n        const data = doc.data();\r\n        return { ...data, username: username };\r\n      });\r\n    });\r\n}\r\n\r\nexport function fetchPeopleToFollowLimit(user) {\r\n  return firestore\r\n    .collection(\"users\")\r\n    .where(firebase.firestore.FieldPath.documentId(), \"not-in\", [\r\n      user.username,\r\n      ...user.following,\r\n    ])\r\n    .limit(2)\r\n    .get()\r\n    .then((result) => {\r\n      return result.docs.map((doc) => {\r\n        const username = doc.id;\r\n        const data = doc.data();\r\n        return { ...data, username: username };\r\n      });\r\n    });\r\n}\r\n\r\nexport function fetchActivity(setActivity) {\r\n  const unsubscribe = firestore\r\n    .collection(\"activity\")\r\n    .orderBy(\"timestamp\", \"desc\")\r\n    .onSnapshot(async (snapshot) => {\r\n      setActivity(\r\n        await Promise.all(\r\n          snapshot.docs.map(async (doc) => {\r\n            const data = doc.data();\r\n            const user = await firestore\r\n              .collection(\"users\")\r\n              .doc(data.username)\r\n              .get()\r\n              .then((result) => result.data());\r\n            return { profilePictureURL: user?.profilePictureURL, ...data };\r\n          })\r\n        )\r\n      );\r\n    });\r\n  return () => unsubscribe();\r\n}\r\n\r\nexport function fetchActivityLimit(setActivity) {\r\n  const unsubscribe = firestore\r\n    .collection(\"activity\")\r\n    .orderBy(\"timestamp\", \"desc\")\r\n    .limit(4)\r\n    .onSnapshot(async (snapshot) => {\r\n      setActivity(\r\n        await Promise.all(\r\n          snapshot.docs.map(async (doc) => {\r\n            const data = doc.data();\r\n            const user = await firestore\r\n              .collection(\"users\")\r\n              .doc(data.username)\r\n              .get()\r\n              .then((result) => result.data());\r\n            return { profilePictureURL: user?.profilePictureURL, ...data };\r\n          })\r\n        )\r\n      );\r\n    });\r\n  return () => unsubscribe();\r\n}\r\n\r\nexport function addActivity(username, message) {\r\n  firestore.collection(\"activity\").add({\r\n    username: username,\r\n    message: message,\r\n    timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n  });\r\n}\r\n","import React, { useState} from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport RoundButton from \"../layout/RoundButton\";\r\nimport ImageIcon from \"@material-ui/icons/Image\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Avatar from \"../layout/Avatar\";\r\nimport GifIcon from \"@material-ui/icons/Gif\";\r\nimport MoodIcon from \"@material-ui/icons/Mood\";\r\nimport PollIcon from \"@material-ui/icons/Poll\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { firestore } from \"../../firebase/config\";\r\nimport firebase from \"firebase/app\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Image from \"../layout/Image\";\r\nimport useStorage from \"../../services/useStorage\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { addActivity } from \"../../services/firebase\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\n\r\nconst CHARACTER_LIMIT = 280;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    padding: theme.spacing(2),\r\n  },\r\n  content: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    width: \"100%\",\r\n    marginLeft: theme.spacing(2),\r\n    gap: theme.spacing(2),\r\n  },\r\n  textField: {},\r\n  iconButton: {\r\n    padding: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  progress: {\r\n    marginLeft: \"auto\",\r\n    marginRight: theme.spacing(2),\r\n    fontSize: \"16\",\r\n  },\r\n}));\r\n\r\nexport default function CreateTweet({\r\n  divider = true,\r\n  minRows = 1,\r\n  onSend = null,\r\n  parent = null,\r\n}) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const { user } = useSelector((state) => state.user);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const [preview, file, handleInputImage, uploadImage, removeImage] =\r\n    useStorage();\r\n\r\n  const tweetOptions = [\r\n    { text: \"GIF\", icon: <GifIcon />, action: null },\r\n    { text: \"Emoji\", icon: <MoodIcon />, action: null },\r\n    { text: \"Poll\", icon: <PollIcon />, action: null },\r\n  ];\r\n\r\n  const handleTextField = (e) => {\r\n    const value = e.target.value;\r\n    setMessage(value);\r\n    setProgress((value.length / CHARACTER_LIMIT) * 100);\r\n  };\r\n\r\n  const handleSendTweet = async (e) => {\r\n    e.preventDefault();\r\n\r\n    setLoading(true);\r\n\r\n    firestore.collection(\"tweets\").add({\r\n      username: user.username,\r\n      message: message,\r\n      parent: parent,\r\n      imageUrl: await uploadImage(),\r\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n      likes: [],\r\n      retweets: [],\r\n      replies: [],\r\n    });\r\n\r\n    setMessage(\"\");\r\n    setProgress(0);\r\n    setLoading(false);\r\n\r\n    addActivity(user.username, `${user.name} tweeted something.`);\r\n\r\n    if (onSend) onSend();\r\n  };\r\n\r\n  const disableButton =\r\n    message.length > CHARACTER_LIMIT ||\r\n    (message.length === 0 && (!file || !preview)) ||\r\n    loading;\r\n\r\n  return (\r\n    <>\r\n      <form className={classes.root} onSubmit={handleSendTweet}>\r\n        <Avatar\r\n          src={\r\n            user &&\r\n            (user.profilePictureURL\r\n              ? user.profilePictureURL\r\n              : \"/profile_picture.png\")\r\n          }\r\n        ></Avatar>\r\n\r\n        <Box className={classes.content}>\r\n          <TextField\r\n            className={classes.textField}\r\n            placeholder={parent ? \"Tweet your reply\" : \"What's happening?\"}\r\n            type=\"text\"\r\n            onChange={handleTextField}\r\n            value={message}\r\n            multiline\r\n            InputProps={{ style: { fontSize: 20 }, disableUnderline: true }}\r\n            maxRows={20}\r\n            minRows={preview ? 1 : minRows}\r\n          />\r\n\r\n          <Image src={preview} removeImage={removeImage} />\r\n\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <IconButton\r\n              className={classes.iconButton}\r\n              color=\"primary\"\r\n              component=\"label\"\r\n            >\r\n              <input type=\"file\" onChange={handleInputImage} hidden />\r\n              <ImageIcon />\r\n            </IconButton>\r\n\r\n            {tweetOptions.map((option, i) => (\r\n              <Tooltip title=\"Not functional\" key={i} arrow>\r\n                <IconButton\r\n                  className={classes.iconButton}\r\n                  color=\"primary\"\r\n                  aria-label={option.text}\r\n                  \r\n                >\r\n                  {React.cloneElement(option.icon, {\r\n                    fontSize: \"small\",\r\n                  })}\r\n                </IconButton>\r\n              </Tooltip>\r\n            ))}\r\n            <CircularProgress\r\n              className={classes.progress}\r\n              variant=\"determinate\"\r\n              value={Math.min(100, progress)}\r\n              style={{\r\n                color:\r\n                  message.length > CHARACTER_LIMIT\r\n                    ? theme.palette.error.main\r\n                    : theme.palette.primary.main,\r\n              }}\r\n              size={30}\r\n              thickness={5}\r\n            />\r\n            <RoundButton\r\n              type=\"submit\"\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              disabled={disableButton}\r\n            >\r\n              Tweet\r\n            </RoundButton>\r\n          </Box>\r\n        </Box>\r\n      </form>\r\n      {divider && <Divider />}\r\n    </>\r\n  );\r\n}\r\n","import { makeStyles } from \"@material-ui/core/styles\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CreateTweet from \"../PrimaryColumn/CreateTweet\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  modal: {\r\n    overflowY: \"auto\",\r\n  },\r\n  content: {\r\n    position: \"absolute\",\r\n    top: \"5%\",\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n    left: 0,\r\n    right: 0,\r\n    maxWidth: \"38rem\",\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.default,\r\n    borderRadius: \"1rem\",\r\n  },\r\n  closeButton: {\r\n    padding: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nexport default function CreateTweetModal({ handleClose, open }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Modal\r\n      open={open}\r\n      onClose={handleClose}\r\n      BackdropProps={{ style: { backgroundColor: \"rgba(91, 112, 131, 0.4)\" } }}\r\n      className={classes.modal}\r\n    >\r\n      <div className={classes.content}>\r\n        <Box p={1}>\r\n          <IconButton\r\n            aria-label=\"close\"\r\n            className={classes.closeButton}\r\n            onClick={handleClose}\r\n          >\r\n            <CloseIcon />\r\n          </IconButton>\r\n        </Box>\r\n        <Divider />\r\n        <CreateTweet divider={false} minRows={5} onSend={handleClose} />\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n","export const setUser = (user) => {\r\n  return {\r\n    type: \"SET_USER\",\r\n    payload: user,\r\n  };\r\n};\r\n\r\nexport const setFirebaseUser = (firebaseUser) => {\r\n  return {\r\n    type: \"SET_FIREBASE_USER\",\r\n    payload: firebaseUser,\r\n  };\r\n};\r\n\r\nexport const toggleTheme = () => {\r\n  return {\r\n    type: \"TOGGLE_THEME\",\r\n  };\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { auth } from \"../../firebase/config\";\r\nimport { useHistory } from \"react-router\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport RoundButton from \"./RoundButton\";\r\nimport HomeIcon from \"@material-ui/icons/HomeRounded\";\r\nimport PublicIcon from \"@material-ui/icons/PublicRounded\";\r\nimport PersonIcon from \"@material-ui/icons/PersonRounded\";\r\nimport SettingsIcon from \"@material-ui/icons/SettingsRounded\";\r\nimport ExitToAppIcon from \"@material-ui/icons/ExitToAppRounded\";\r\nimport TwitterIcon from \"@material-ui/icons/Twitter\";\r\nimport BrightnessLowIcon from \"@material-ui/icons/BrightnessLowRounded\";\r\nimport BrightnessMediumIcon from \"@material-ui/icons/BrightnessMediumRounded\";\r\nimport BrightnessHighIcon from \"@material-ui/icons/BrightnessHighRounded\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport CreateIcon from \"@material-ui/icons/Create\";\r\nimport CreateTweetModal from \"./CreateTweetModal\";\r\nimport StickyBox from \"react-sticky-box\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toggleTheme } from \"../../redux/actions\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: theme.spacing(1, 2, 2, 0),\r\n    maxWidth: \"16rem\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    gap: theme.spacing(0.5),\r\n    [theme.breakpoints.up(\"lg\")]: {\r\n      flex: 1,\r\n      alignItems: \"flex-start\",\r\n    },\r\n    [theme.breakpoints.down(\"md\")]: {\r\n      alignItems: \"center\",\r\n    },\r\n  },\r\n  logo: {\r\n    padding: theme.spacing(1.5),\r\n  },\r\n  navLink: {\r\n    [theme.breakpoints.up(\"lg\")]: {\r\n      padding: theme.spacing(1.5, 2.5, 1.5, 1.5),\r\n    },\r\n    [theme.breakpoints.down(\"md\")]: {\r\n      padding: theme.spacing(1.5),\r\n    },\r\n  },\r\n  navText: {\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n  tweetButtonLg: {\r\n    marginTop: theme.spacing(3),\r\n    paddingTop: theme.spacing(1.5),\r\n    paddingBottom: theme.spacing(1.5),\r\n    fontSize: 16,\r\n    width: \"100%\",\r\n  },\r\n  tweetButtonSm: {\r\n    marginTop: theme.spacing(1.5),\r\n    padding: theme.spacing(1.5),\r\n  },\r\n}));\r\n\r\nexport default function Navigation() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const { type } = useSelector((state) => state.theme);\r\n  const { user } = useSelector((state) => state.user);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    auth\r\n      .signOut()\r\n      .then(() => history.push(\"/login\"))\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  let menuItems = [\r\n    { text: \"Home\", icon: <HomeIcon />, onClick: () => history.push(\"/home\") },\r\n    {\r\n      text: \"Explore\",\r\n      icon: <PublicIcon />,\r\n      onClick: () => history.push(\"/explore\"),\r\n    },\r\n    {\r\n      text: \"Profile\",\r\n      icon: <PersonIcon />,\r\n      onClick: () => history.push(`/profile/${user.username}`),\r\n    },\r\n    {\r\n      text: \"Settings\",\r\n      icon: <SettingsIcon />,\r\n      onClick: () => history.push(\"/settings\"),\r\n    },\r\n    {\r\n      text: \"Toggle Theme\",\r\n      icon:\r\n        type === \"dark\" ? (\r\n          <BrightnessLowIcon />\r\n        ) : type === \"dim\" ? (\r\n          <BrightnessMediumIcon />\r\n        ) : (\r\n          <BrightnessHighIcon />\r\n        ),\r\n      onClick: () => dispatch(toggleTheme()),\r\n    },\r\n    { text: \"Log out\", icon: <ExitToAppIcon />, onClick: handleLogout },\r\n  ];\r\n\r\n  if (!user) menuItems = [menuItems[1], menuItems[4]];\r\n\r\n  return (\r\n    <>\r\n      <StickyBox className={classes.root}>\r\n        <RoundButton className={classes.logo} color=\"primary\">\r\n          <TwitterIcon style={{ fontSize: 32 }} />\r\n        </RoundButton>\r\n        {menuItems.map((item, i) => (\r\n          <RoundButton\r\n            key={i}\r\n            onClick={item.onClick}\r\n            className={classes.navLink}\r\n          >\r\n            {React.cloneElement(item.icon, {\r\n              style: { fontSize: 32 },\r\n            })}\r\n            <Hidden mdDown>\r\n              <Typography className={classes.navText} variant=\"h6\">\r\n                {item.text}\r\n              </Typography>\r\n            </Hidden>\r\n          </RoundButton>\r\n        ))}\r\n        {user && (\r\n          <>\r\n            <Hidden mdDown>\r\n              <RoundButton\r\n                onClick={handleOpen}\r\n                className={classes.tweetButtonLg}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                size=\"large\"\r\n              >\r\n                Tweet\r\n              </RoundButton>\r\n            </Hidden>\r\n            <Hidden lgUp>\r\n              <RoundButton\r\n                onClick={handleOpen}\r\n                className={classes.tweetButtonSm}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n              >\r\n                <CreateIcon style={{ fontSize: 35 }} />\r\n              </RoundButton>\r\n            </Hidden>\r\n          </>\r\n        )}\r\n      </StickyBox>\r\n\r\n      {user && <CreateTweetModal handleClose={handleClose} open={open} />}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexGrow: 1,\r\n    flexDirection: \"column\",\r\n    minHeight: \"100vh\",\r\n    maxWidth: \"38rem\",\r\n  },\r\n}));\r\n\r\nexport default function PrimaryColumn({ children, divider = true }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      {divider && <Divider orientation=\"vertical\" flexItem />}\r\n      <div className={classes.root}>{children}</div>\r\n      {divider && <Divider orientation=\"vertical\" flexItem />}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport StickyBox from \"react-sticky-box\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ArrowBackRoundedIcon from \"@material-ui/icons/ArrowBackRounded\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.default,\r\n    zIndex: theme.zIndex.appBar,\r\n  },\r\n  backButton: {\r\n    marginRight: theme.spacing(2),\r\n    padding: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nexport default function Header({ title, divider = true, backButton = false }) {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <StickyBox className={classes.root}>\r\n      <Box py={1} px={2} display=\"flex\" alignItems=\"center\">\r\n        {backButton && (\r\n          <IconButton className={classes.backButton} onClick={history.goBack}>\r\n            <ArrowBackRoundedIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        )}\r\n        <Typography variant=\"h6\">{title}</Typography>\r\n      </Box>\r\n      {divider && <Divider />}\r\n    </StickyBox>\r\n  );\r\n}\r\n","export default function timeDifference(timestamp) {\r\n  let msPerMinute = 60 * 1000;\r\n  let msPerHour = msPerMinute * 60;\r\n  let msPerDay = msPerHour * 24;\r\n  var msPerMonth = msPerDay * 30;\r\n  var msPerYear = msPerDay * 365;\r\n\r\n  let current = new Date();\r\n  let elapsed = current - timestamp;\r\n\r\n  if (elapsed < 0) {\r\n    return \"0s\";\r\n  } else if (elapsed < msPerMinute) {\r\n    return Math.round(elapsed / 1000) + \"s\";\r\n  } else if (elapsed < msPerHour) {\r\n    return Math.round(elapsed / msPerMinute) + \"m\";\r\n  } else if (elapsed < msPerDay) {\r\n    return Math.round(elapsed / msPerHour) + \"h\";\r\n  } else if (elapsed < msPerMonth) {\r\n    return `${timestamp.toLocaleString(\"en-us\", {\r\n      month: \"short\",\r\n    })} ${timestamp.getDate()}`;\r\n  } else if (elapsed < msPerYear) {\r\n    return `${timestamp.toLocaleString(\"en-us\", {\r\n      month: \"short\",\r\n    })} ${timestamp.getDate()}, ${timestamp.getFullYear()}`;\r\n  }\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport ChatBubbleOutlineIcon from \"@material-ui/icons/ChatBubbleOutline\";\r\nimport CachedIcon from \"@material-ui/icons/Cached\";\r\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\r\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\r\nimport ShareIcon from \"@material-ui/icons/Share\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Avatar from \"../layout/Avatar\";\r\nimport RoundButton from \"../layout/RoundButton\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Image from \"../layout/Image\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { useHistory } from \"react-router\";\r\nimport { firestore } from \"../../firebase/config\";\r\nimport firebase from \"firebase/app\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { fetchUser } from \"../../services/firebase\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport timeDifference from \"../../services/timeDifference\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  tweet: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    padding: theme.spacing(1.75, 2, 1, 2),\r\n    cursor: \"pointer\",\r\n    zIndex: -1,\r\n  },\r\n  content: {\r\n    marginLeft: theme.spacing(2),\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n  },\r\n  tweetInfo: {\r\n    display: \"flex\",\r\n    gap: theme.spacing(0.5),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  tweetMessage: {\r\n    whiteSpace: \"pre-line\",\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  tweetImage: {\r\n    margin: theme.spacing(0.5, 0, 0.5, 0),\r\n  },\r\n  iconButton: {\r\n    padding: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nexport default function Tweet({ tweet, divider = true }) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const history = useHistory();\r\n\r\n  const { user: currentUser } = useSelector((state) => state.user);\r\n\r\n  const [user, setUser] = useState(null);\r\n  const [likes, setLikes] = useState(null);\r\n  const [toggleLiked, setToggledLiked] = useState(null);\r\n  const [retweets, setRetweets] = useState(null);\r\n  const [toggleRetweet, setToggledRetweet] = useState(null);\r\n\r\n  const handleToggledLiked = async (e) => {\r\n    e.stopPropagation();\r\n\r\n    await setToggledLiked((toggleLiked) => !toggleLiked);\r\n\r\n    await firestore\r\n      .collection(\"tweets\")\r\n      .doc(tweet.id)\r\n      .update({\r\n        likes: toggleLiked\r\n          ? firebase.firestore.FieldValue.arrayRemove(currentUser.username)\r\n          : firebase.firestore.FieldValue.arrayUnion(currentUser.username),\r\n      });\r\n\r\n    await firestore\r\n      .collection(\"users\")\r\n      .doc(currentUser.username)\r\n      .update({\r\n        likes: toggleLiked\r\n          ? firebase.firestore.FieldValue.arrayRemove(tweet.id)\r\n          : firebase.firestore.FieldValue.arrayUnion(tweet.id),\r\n      });\r\n\r\n    setLikes((likes) => (toggleLiked ? likes - 1 : likes + 1));\r\n  };\r\n\r\n  const handleToggledRetweet = async (e) => {\r\n    e.stopPropagation();\r\n    setToggledRetweet((toggleRetweet) => !toggleRetweet);\r\n\r\n    await firestore\r\n      .collection(\"tweets\")\r\n      .doc(tweet.id)\r\n      .update({\r\n        retweets: toggleRetweet\r\n          ? firebase.firestore.FieldValue.arrayRemove(currentUser.username)\r\n          : firebase.firestore.FieldValue.arrayUnion(currentUser.username),\r\n      });\r\n\r\n    await firestore\r\n      .collection(\"users\")\r\n      .doc(currentUser.username)\r\n      .update({\r\n        retweets: toggleRetweet\r\n          ? firebase.firestore.FieldValue.arrayRemove(tweet.id)\r\n          : firebase.firestore.FieldValue.arrayUnion(tweet.id),\r\n      });\r\n\r\n    setRetweets((retweets) => (toggleRetweet ? retweets - 1 : retweets + 1));\r\n  };\r\n\r\n  useEffect(async () => {\r\n    setUser(await fetchUser(tweet?.username));\r\n    setLikes(tweet?.likes?.length);\r\n    setToggledLiked(currentUser?.likes?.includes(tweet?.id));\r\n    setRetweets(tweet?.retweets?.length);\r\n    setToggledRetweet(currentUser?.retweets?.includes(tweet?.id));\r\n  }, [tweet.id]);\r\n\r\n  const tweetOptions = [\r\n    {\r\n      text: \"Reply\",\r\n      icon: <ChatBubbleOutlineIcon />,\r\n      value: tweet?.replies?.length,\r\n      action: null,\r\n      color: \"#fff\",\r\n      activated: false,\r\n    },\r\n    {\r\n      text: \"Retweet\",\r\n      icon: <CachedIcon />,\r\n      value: retweets,\r\n      action: handleToggledRetweet,\r\n      color: \"rgb(0, 186, 124)\",\r\n      activated: toggleRetweet,\r\n    },\r\n    {\r\n      text: \"Like\",\r\n      icon: toggleLiked ? <FavoriteIcon /> : <FavoriteBorderIcon />,\r\n      value: likes,\r\n      action: handleToggledLiked,\r\n      color: \"rgb(249, 24, 128)\",\r\n      activated: toggleLiked,\r\n    },\r\n    {\r\n      text: \"Share\",\r\n      icon: <ShareIcon />,\r\n      value: null,\r\n      action: null,\r\n      color: \"#fff\",\r\n      activated: false,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      {tweet && user && (\r\n        <>\r\n          <div\r\n            className={classes.tweet}\r\n            onClick={() => history.push(`/tweet/${tweet.id}`)}\r\n          >\r\n            <Avatar\r\n              src={user.profilePictureURL}\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                history.push(`/profile/${tweet.username}`);\r\n              }}\r\n            />\r\n            <Box className={classes.content}>\r\n              <Box className={classes.tweetInfo}>\r\n                <Link\r\n                  variant=\"body2\"\r\n                  color=\"textPrimary\"\r\n                  component={\"span\"}\r\n                  noWrap={true}\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    history.push(`/profile/${tweet.username}`);\r\n                  }}\r\n                >\r\n                  <Box fontWeight=\"fontWeightMedium\">{user.name}</Box>\r\n                </Link>\r\n                {tweet.timestamp &&\r\n                  [\r\n                    `@${user.username}`,\r\n                    \"\",\r\n                    timeDifference(tweet.timestamp?.toDate()),\r\n                  ].map((info, i) => (\r\n                    <Typography\r\n                      key={i}\r\n                      variant=\"body2\"\r\n                      color=\"textSecondary\"\r\n                      component={\"span\"}\r\n                      noWrap={true}\r\n                    >\r\n                      {info}\r\n                    </Typography>\r\n                  ))}\r\n              </Box>\r\n\r\n              {tweet.message?.length > 0 && (\r\n                <Typography\r\n                  variant=\"body2\"\r\n                  color=\"textPrimary\"\r\n                  className={classes.tweetMessage}\r\n                >\r\n                  {tweet.message}\r\n                </Typography>\r\n              )}\r\n\r\n              <Image\r\n                src={tweet.imageUrl}\r\n                className={classes.tweetImage}\r\n                showModal={false}\r\n              />\r\n\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                {tweetOptions.map((option, i) => (\r\n                  <Box width=\"100%\" display=\"flex\" alignItems=\"center\" key={i}>\r\n                    {!!option.action ? (\r\n                      <RoundButton\r\n                        style={{\r\n                          color: option.activated\r\n                            ? option.color\r\n                            : theme.palette.text.secondary,\r\n                        }}\r\n                        size=\"small\"\r\n                        onClick={option.action}\r\n                      >\r\n                        {React.cloneElement(option.icon, {\r\n                          style: { fontSize: 20 },\r\n                        })}\r\n                        {option.value > 0 && (\r\n                          <Box ml={1} fontSize={13}>\r\n                            {option.value}\r\n                          </Box>\r\n                        )}\r\n                      </RoundButton>\r\n                    ) : (\r\n                      <Tooltip title=\"Not functional\" arrow>\r\n                        <RoundButton\r\n                          style={{\r\n                            color: option.activated\r\n                              ? option.color\r\n                              : theme.palette.text.secondary,\r\n                          }}\r\n                          size=\"small\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                          }}\r\n                        >\r\n                          {React.cloneElement(option.icon, {\r\n                            style: { fontSize: 20 },\r\n                          })}\r\n                        </RoundButton>\r\n                      </Tooltip>\r\n                    )}\r\n                  </Box>\r\n                ))}\r\n              </Box>\r\n            </Box>\r\n          </div>\r\n          {divider && <Divider />}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Tweet from \"./Tweet\";\r\n\r\nexport default function Timeline({ tweets }) {\r\n  return (\r\n    <div>\r\n      {tweets && (\r\n        <>\r\n          {tweets.map((tweet, i) => (\r\n            <Tweet tweet={tweet} key={i} />\r\n          ))}\r\n\r\n          <div style={{ height: \"30vh\" }}></div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport StickyBox from \"react-sticky-box\";\r\nimport Copyright from \"../layout/Copyright\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flex: 1,\r\n    maxWidth: \"24rem\",\r\n    minWidth: \"20rem\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    padding: theme.spacing(2, 0, 2, 2),\r\n    gap: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function SecondaryColumn({ children, copyright = true }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Hidden smDown>\r\n      <StickyBox className={classes.root}>\r\n        {children}\r\n        {copyright && <Copyright textAlign=\"center\" />}\r\n      </StickyBox>\r\n    </Hidden>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: theme.spacing(1, 2),\r\n    borderRadius: \"9999px\",\r\n  },\r\n}));\r\n\r\nexport default function Search({ children }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <form>\r\n        <TextField\r\n          placeholder=\"Search Twitter...\"\r\n          type=\"text\"\r\n          InputProps={{\r\n            startAdornment: (\r\n              <InputAdornment position=\"start\">\r\n                <SearchIcon />\r\n              </InputAdornment>\r\n            ),\r\n            disableUnderline: true,\r\n          }}\r\n        />\r\n      </form>\r\n    </Paper>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Avatar from \"../layout/Avatar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { fetchActivityLimit } from \"../../services/firebase\";\r\nimport timeDifference from \"../../services/timeDifference\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    borderRadius: theme.spacing(2),\r\n  },\r\n  list: {\r\n    padding: 0,\r\n  },\r\n  listItem: {\r\n    padding: theme.spacing(1.5, 2),\r\n  },\r\n  showMore: {\r\n    padding: theme.spacing(1.5, 2),\r\n    borderRadius: theme.spacing(0, 0, 2, 2),\r\n  },\r\n  avatar: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function Activity() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const [activity, setActivity] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = fetchActivityLimit(setActivity);\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <List className={classes.list}>\r\n        <ListItem className={classes.listItem}>\r\n          <Typography variant=\"h6\">What's happening</Typography>\r\n        </ListItem>\r\n        {activity &&\r\n          activity.map((item, i) => (\r\n            <ListItem\r\n              key={i}\r\n              className={classes.listItem}\r\n              onClick={() => history.push(`/profile/${item.username}`)}\r\n              button\r\n            >\r\n              <Avatar\r\n                className={classes.avatar}\r\n                src={item?.profilePictureURL}\r\n              />\r\n              <ListItemText\r\n                secondary={timeDifference(item.timestamp?.toDate())}\r\n              >\r\n                <Typography variant=\"body2\">{item?.message}</Typography>\r\n              </ListItemText>\r\n            </ListItem>\r\n          ))}\r\n        <ListItem\r\n          className={classes.showMore}\r\n          onClick={() => history.push(\"/activity\")}\r\n          button\r\n        >\r\n          <Link href=\"#\" style={{ textDecoration: \"none\" }}>\r\n            Show more\r\n          </Link>\r\n        </ListItem>\r\n      </List>\r\n    </Paper>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport RoundButton from \"./RoundButton\";\r\nimport { firestore } from \"../../firebase/config\";\r\nimport firebase from \"firebase/app\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { addActivity } from \"../../services/firebase\";\r\n\r\nexport default function FollowButton({ user, ...rest }) {\r\n\r\n  const { user: currentUser } = useSelector((state) => state.user);\r\n  const [toggleFollow, setToggledFollow] = useState(\r\n    currentUser.following.includes(user.username)\r\n  );\r\n\r\n  const handleClick = async () => {\r\n    if (!toggleFollow)\r\n      addActivity(\r\n        currentUser.username,\r\n        `${currentUser.name} followed ${user.name}.`\r\n      );\r\n\r\n    setToggledFollow((toggleFollow) => !toggleFollow);\r\n\r\n    await firestore\r\n      .collection(\"users\")\r\n      .doc(user.username)\r\n      .update({\r\n        followers: toggleFollow\r\n          ? firebase.firestore.FieldValue.arrayRemove(currentUser.username)\r\n          : firebase.firestore.FieldValue.arrayUnion(currentUser.username),\r\n      });\r\n\r\n    await firestore\r\n      .collection(\"users\")\r\n      .doc(currentUser.username)\r\n      .update({\r\n        following: toggleFollow\r\n          ? firebase.firestore.FieldValue.arrayRemove(user.username)\r\n          : firebase.firestore.FieldValue.arrayUnion(user.username),\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {toggleFollow ? (\r\n        <RoundButton\r\n          variant=\"outlined\"\r\n          color=\"secondary\"\r\n          onClick={handleClick}\r\n          {...rest}\r\n        >\r\n          Following\r\n        </RoundButton>\r\n      ) : (\r\n        <RoundButton\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={handleClick}\r\n          {...rest}\r\n        >\r\n          Follow\r\n        </RoundButton>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport FollowButton from \"../layout/FollowButton\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { fetchPeopleToFollowLimit } from \"../../services/firebase\";\r\nimport Avatar from \"../layout/Avatar\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    borderRadius: theme.spacing(2),\r\n  },\r\n  list: {\r\n    padding: 0,\r\n  },\r\n  listItem: {\r\n    padding: theme.spacing(1.5, 2),\r\n  },\r\n  showMore: {\r\n    padding: theme.spacing(1.5, 2),\r\n    borderRadius: theme.spacing(0, 0, 2, 2),\r\n  },\r\n  avatar: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function FollowMenu() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const { user: currentUser } = useSelector((state) => state.user);\r\n  const [users, setUsers] = useState(null);\r\n\r\n  useEffect(async () => {\r\n    setUsers(await fetchPeopleToFollowLimit(currentUser));\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {users && (\r\n        <Paper className={classes.root}>\r\n          <List className={classes.list}>\r\n            <ListItem className={classes.listItem}>\r\n              <Typography variant=\"h6\">Who to follow</Typography>\r\n            </ListItem>\r\n            {users &&\r\n              users.map((user, i) => (\r\n                <ListItem\r\n                  key={i}\r\n                  className={classes.listItem}\r\n                  button\r\n                  onClick={() => history.push(`/profile/${user.username}`)}\r\n                >\r\n                  <Avatar\r\n                    src={user.profilePictureURL}\r\n                    className={classes.avatar}\r\n                  />\r\n                  <ListItemText secondary={`@${user.username}`}>\r\n                    <Typography variant=\"body2\" component={\"span\"}>\r\n                      <Box fontWeight=\"fontWeightMedium\">{user.name}</Box>\r\n                    </Typography>\r\n                  </ListItemText>\r\n                  <ListItemSecondaryAction>\r\n                    <FollowButton size=\"small\" user={user}>\r\n                      Follow\r\n                    </FollowButton>\r\n                  </ListItemSecondaryAction>\r\n                </ListItem>\r\n              ))}\r\n            <ListItem\r\n              className={classes.showMore}\r\n              onClick={() => history.push(\"/connect\")}\r\n              button\r\n            >\r\n              <Link href=\"#\" style={{ textDecoration: \"none\" }}>\r\n                Show more\r\n              </Link>\r\n            </ListItem>\r\n          </List>\r\n        </Paper>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport RoundButton from \"../layout/RoundButton\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"auto\",\r\n    marginTop: theme.spacing(8),\r\n    alignSelf: \"center\",\r\n    maxWidth: \"20rem\",\r\n  },\r\n}));\r\n\r\nexport default function Welcome({ display }) {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <>\r\n      {display && (\r\n        <>\r\n          <Box className={classes.root}>\r\n            <Box\r\n              fontWeight=\"fontWeightBold\"\r\n              fontSize=\"h4.fontSize\"\r\n              mb={1}\r\n            >{`Welcome to Twitter!`}</Box>\r\n            <Typography\r\n              color=\"textSecondary\"\r\n              variant=\"body2\"\r\n            >{`This is the best place to see whats happening in your world. Find some people and topics to follow now.`}</Typography>\r\n            <Box mt={3}>\r\n              <RoundButton\r\n                size=\"large\"\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                onClick={() => history.push(\"/connect\")}\r\n              >{`Let's go!`}</RoundButton>\r\n            </Box>\r\n          </Box>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Navigation from \"../layout/Navigation\";\r\nimport PrimaryColumn from \"../PrimaryColumn/PrimaryColumn\";\r\nimport Header from \"../PrimaryColumn/Header\";\r\nimport CreateTweet from \"../PrimaryColumn/CreateTweet\";\r\nimport Timeline from \"../PrimaryColumn/Timeline\";\r\nimport SecondaryColumn from \"../SecondaryColumn/SecondaryColumn\";\r\nimport Search from \"../SecondaryColumn/Search\";\r\nimport Activity from \"../SecondaryColumn/Activity\";\r\nimport FollowMenu from \"../SecondaryColumn/FollowMenu\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { fetchHomeTimeline } from \"../../services/firebase\";\r\nimport Welcome from \"../PrimaryColumn/Welcome\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    \"&::before, &::after\": {\r\n      content: '\"\"',\r\n      margin: \"auto\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function Home() {\r\n  const classes = useStyles();\r\n  const [timeline, setTimeline] = useState(null);\r\n  const { user } = useSelector((state) => state.user);\r\n\r\n  useEffect(async () => {\r\n    let unsubscribe = fetchHomeTimeline(user, setTimeline);\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  return (\r\n    <Container className={classes.root}>\r\n      <Navigation />\r\n\r\n      <PrimaryColumn>\r\n        <Header title=\"Home\" />\r\n        <CreateTweet />\r\n        <Welcome display={timeline?.length === 0} />\r\n        <Timeline tweets={timeline} />\r\n      </PrimaryColumn>\r\n\r\n      <SecondaryColumn>\r\n        <Search />\r\n        <Activity />\r\n        <FollowMenu />\r\n      </SecondaryColumn>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { firestore } from \"../../firebase/config\";\r\nimport Navigation from \"../layout/Navigation\";\r\nimport PrimaryColumn from \"../PrimaryColumn/PrimaryColumn\";\r\nimport Header from \"../PrimaryColumn/Header\";\r\nimport Timeline from \"../PrimaryColumn/Timeline\";\r\nimport SecondaryColumn from \"../SecondaryColumn/SecondaryColumn\";\r\nimport Search from \"../SecondaryColumn/Search\";\r\nimport Activity from \"../SecondaryColumn/Activity\";\r\nimport FollowMenu from \"../SecondaryColumn/FollowMenu\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    \"&::before, &::after\": {\r\n      content: '\"\"',\r\n      margin: \"auto\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function Explore() {\r\n  const [timeline, setTimeline] = useState(null);\r\n\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = firestore\r\n      .collection(\"tweets\")\r\n      .where(\"parent\", \"==\", null)\r\n      .orderBy(\"timestamp\", \"desc\")\r\n      .onSnapshot((snapshot) => {\r\n        setTimeline(\r\n          snapshot.docs.map((doc) => {\r\n            const data = doc.data();\r\n            const id = doc.id;\r\n            return { id, ...data };\r\n          })\r\n        );\r\n      });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  return (\r\n    <Container className={classes.root}>\r\n      <Navigation />\r\n\r\n      <PrimaryColumn>\r\n        <Header title=\"Explore\" />\r\n        <Timeline tweets={timeline} />\r\n      </PrimaryColumn>\r\n\r\n      <SecondaryColumn>\r\n        <Search />\r\n        <Activity />\r\n        <FollowMenu />\r\n      </SecondaryColumn>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport ProfileHeaderInput from \"./ProfileHeaderInput\";\r\nimport useStorage from \"../../services/useStorage\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport RoundButton from \"./RoundButton\";\r\nimport { firestore, storage } from \"../../firebase/config\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  modal: {\r\n    overflowY: \"auto\",\r\n  },\r\n  content: {\r\n    position: \"absolute\",\r\n    top: \"5%\",\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n    left: 0,\r\n    right: 0,\r\n    maxWidth: \"32rem\",\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.default,\r\n    borderRadius: \"1rem\",\r\n  },\r\n  closeButton: {\r\n    padding: theme.spacing(1),\r\n  },\r\n  inputs: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    gap: theme.spacing(3),\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function EditProfileModal() {\r\n  const classes = useStyles();\r\n\r\n  const { user } = useSelector((state) => state.user);\r\n  const [biography, setBiography] = useState(user.biography);\r\n  const [name, setName] = useState(user.name);\r\n  const [\r\n    profilePreview,\r\n    profileFile,\r\n    handleProfileInputImage,\r\n    uploadProfileImage,\r\n    removeProfileImage,\r\n  ] = useStorage(user.profilePictureURL);\r\n  const [\r\n    headerPreview,\r\n    headerFile,\r\n    handleHeaderInputImage,\r\n    uploadHeaderImage,\r\n    removeHeaderImage,\r\n  ] = useStorage(user.headerImageURL);\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    const document = {};\r\n    if (user.name !== name) document.name = name;\r\n    if (user.biography !== biography) document.biography = biography;\r\n    if (user.profilePictureURL !== profilePreview)\r\n      document.profilePictureURL = await uploadProfileImage();\r\n    if (user.headerImageURL !== headerPreview)\r\n      document.headerImageURL = await uploadHeaderImage();\r\n    firestore.collection(\"users\").doc(user.username).update(document);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <RoundButton variant=\"outlined\" color=\"secondary\" onClick={handleOpen}>\r\n        Edit profile\r\n      </RoundButton>\r\n\r\n      <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        BackdropProps={{\r\n          style: { backgroundColor: \"rgba(91, 112, 131, 0.4)\" },\r\n        }}\r\n        className={classes.modal}\r\n      >\r\n        <div className={classes.content}>\r\n          <Box p={1} display=\"flex\" alignItems=\"center\">\r\n            <IconButton\r\n              aria-label=\"close\"\r\n              className={classes.closeButton}\r\n              onClick={handleClose}\r\n            >\r\n              <CloseIcon />\r\n            </IconButton>\r\n            <Box ml=\"auto\">\r\n              <RoundButton\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleSubmit}\r\n              >\r\n                Save\r\n              </RoundButton>\r\n            </Box>\r\n          </Box>\r\n          <Divider />\r\n          <Box className={classes.inputs}>\r\n            <ProfileHeaderInput\r\n              profilePreview={profilePreview}\r\n              handleProfileInputImage={handleProfileInputImage}\r\n              headerPreview={headerPreview}\r\n              handleHeaderInputImage={handleHeaderInputImage}\r\n              removeHeaderImage={removeHeaderImage}\r\n            />\r\n            <TextField\r\n              className={classes.marginBottom}\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              label=\"Name\"\r\n              type=\"text\"\r\n              autoFocus\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n            />\r\n            <TextField\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              label=\"Your bio\"\r\n              type=\"text\"\r\n              value={biography}\r\n              onChange={(e) => setBiography(e.target.value)}\r\n              inputProps={{ maxLength: 150 }}\r\n              autoFocus\r\n              multiline\r\n            />\r\n          </Box>\r\n        </div>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Avatar from \"../layout/Avatar\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport TodayIcon from \"@material-ui/icons/Today\";\r\nimport EditProfileButton from \"../layout/EditProfileButton\";\r\nimport { useSelector } from \"react-redux\";\r\nimport FollowButton from \"../layout/FollowButton\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  header: {\r\n    backgroundColor: theme.palette.grey[600],\r\n    backgroundSize: \"cover\",\r\n    backgroundPosition: \"center\",\r\n  },\r\n  content: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    padding: theme.spacing(2, 2, 3, 2),\r\n    gap: theme.spacing(2),\r\n  },\r\n  pictureContainer: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    alignItems: \"flex-start\",\r\n    justifyContent: \"space-between\",\r\n    marginBottom: theme.spacing(1),\r\n    gap: theme.spacing(1),\r\n  },\r\n  profilePicture: {\r\n    alignSelf: \"flex-end\",\r\n    width: \"25%\",\r\n    height: \"auto\",\r\n    minWidth: \"48px\",\r\n    aspectRatio: \"1/1\",\r\n    marginTop: \"-16%\",\r\n    marginBottom: \"-2px\",\r\n    borderStyle: \"solid\",\r\n    borderWidth: \"4px\",\r\n    borderColor: theme.palette.background.default,\r\n  },\r\n  date: {\r\n    verticalAlign: \"text-bottom\",\r\n    fontSize: 18,\r\n  },\r\n  bio: {\r\n    whiteSpace: \"pre-line\",\r\n    width: \"100%\",\r\n  },\r\n}));\r\n\r\nexport default function Profile({ user }) {\r\n  const classes = useStyles();\r\n\r\n  const { user: currentUser } = useSelector((state) => state.user);\r\n\r\n  const headerImageURL = user?.headerImageURL\r\n    ? `url(${user.headerImageURL})`\r\n    : null;\r\n\r\n  const createdAt = user?.createdAt?.toDate();\r\n  const dateJoined = ` Joined ${createdAt?.toLocaleString(\"default\", {\r\n    month: \"long\",\r\n  })} ${createdAt?.getFullYear()}`;\r\n\r\n  return (\r\n    <>\r\n      {user && currentUser && (\r\n        <>\r\n          <Box width=\"100%\">\r\n            <Box\r\n              className={classes.header}\r\n              style={{ backgroundImage: headerImageURL }}\r\n            >\r\n              <Box width=\"100%\" pb=\"33%\"></Box>\r\n            </Box>\r\n            <Box className={classes.content}>\r\n              <Box>\r\n                <Box className={classes.pictureContainer}>\r\n                  <Avatar\r\n                    className={classes.profilePicture}\r\n                    src={user.profilePictureURL}\r\n                  />\r\n                  {currentUser.username === user.username ? (\r\n                    <EditProfileButton />\r\n                  ) : (\r\n                    <FollowButton user={user} />\r\n                  )}\r\n                </Box>\r\n                <Box fontWeight=\"fontWeightBold\" fontSize=\"h6.fontSize\">\r\n                  {user.name}\r\n                </Box>\r\n                <Typography\r\n                  color=\"textSecondary\"\r\n                  variant=\"body2\"\r\n                >{`@${user.username}`}</Typography>\r\n              </Box>\r\n              {user.biography && (\r\n                <Typography variant=\"body2\" className={classes.bio}>\r\n                  {user.biography}\r\n                </Typography>\r\n              )}\r\n              <Typography color=\"textSecondary\" variant=\"body2\">\r\n                <TodayIcon className={classes.date} />\r\n                {dateJoined}\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <Box\r\n                  fontWeight=\"fontWeightBold\"\r\n                  fontSize=\"body2.fontSize\"\r\n                  mr={2}\r\n                >\r\n                  {user.following.length}{\" \"}\r\n                  <Typography\r\n                    color=\"textSecondary\"\r\n                    variant=\"body2\"\r\n                    component=\"span\"\r\n                  >\r\n                    Following\r\n                  </Typography>\r\n                </Box>\r\n                <Box fontWeight=\"fontWeightBold\" fontSize=\"body2.fontSize\">\r\n                  {user.followers.length}{\" \"}\r\n                  <Typography\r\n                    color=\"textSecondary\"\r\n                    variant=\"body2\"\r\n                    component=\"span\"\r\n                  >\r\n                    Followers\r\n                  </Typography>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n          </Box>\r\n          <Divider />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Avatar from \"../layout/Avatar\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  header: {\r\n    backgroundColor: theme.palette.grey[600],\r\n    backgroundSize: \"cover\",\r\n    backgroundPosition: \"center\",\r\n  },\r\n  content: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    padding: theme.spacing(2),\r\n    gap: theme.spacing(2),\r\n  },\r\n  pictureContainer: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    alignItems: \"flex-start\",\r\n    justifyContent: \"space-between\",\r\n    marginBottom: theme.spacing(1),\r\n    gap: theme.spacing(1),\r\n  },\r\n  profilePicture: {\r\n    alignSelf: \"flex-end\",\r\n    width: \"25%\",\r\n    height: \"auto\",\r\n    minWidth: \"48px\",\r\n    aspectRatio: \"1/1\",\r\n    marginTop: \"-16%\",\r\n    marginBottom: \"-2px\",\r\n    borderStyle: \"solid\",\r\n    borderWidth: \"4px\",\r\n    borderColor: theme.palette.background.default,\r\n  },\r\n  notFound: {\r\n    width: \"auto\",\r\n    marginTop: theme.spacing(8),\r\n    alignSelf: \"center\",\r\n  },\r\n}));\r\n\r\nexport default function ProfileNotFound({ username }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      <Box width=\"100%\">\r\n        <Box className={classes.header}>\r\n          <Box width=\"100%\" pb=\"33%\"></Box>\r\n        </Box>\r\n        <Box className={classes.content}>\r\n          <Box>\r\n            <Box className={classes.pictureContainer}>\r\n              <Avatar className={classes.profilePicture} />\r\n            </Box>\r\n            <Box\r\n              fontWeight=\"fontWeightBold\"\r\n              fontSize=\"h6.fontSize\"\r\n            >{`@${username}`}</Box>\r\n          </Box>\r\n          <Box className={classes.notFound}>\r\n            <Box\r\n              fontWeight=\"fontWeightBold\"\r\n              fontSize=\"h4.fontSize\"\r\n            >{`This account doesnt exist`}</Box>\r\n            <Typography\r\n              color=\"textSecondary\"\r\n              variant=\"body2\"\r\n            >{`Try searching for another.`}</Typography>\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport Navigation from \"../layout/Navigation\";\r\nimport PrimaryColumn from \"../PrimaryColumn/PrimaryColumn\";\r\nimport Header from \"../PrimaryColumn/Header\";\r\nimport Profile from \"../PrimaryColumn/Profile\";\r\nimport ProfileNotFound from \"../PrimaryColumn/ProfileNotFound\";\r\nimport Timeline from \"../PrimaryColumn/Timeline\";\r\nimport SecondaryColumn from \"../SecondaryColumn/SecondaryColumn\";\r\nimport Search from \"../SecondaryColumn/Search\";\r\nimport Activity from \"../SecondaryColumn/Activity\";\r\nimport FollowMenu from \"../SecondaryColumn/FollowMenu\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { fetchUserSnapshot, fetchUserTimeline } from \"../../services/firebase\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    \"&::before, &::after\": {\r\n      content: '\"\"',\r\n      margin: \"auto\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function ProfilePage() {\r\n  const { username } = useParams();\r\n  const [user, setUser] = useState(null);\r\n  const [timeline, setTimeline] = useState(null);\r\n\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = [];\r\n    unsubscribe.push(fetchUserSnapshot(username, setUser));\r\n    unsubscribe.push(fetchUserTimeline(username, setTimeline));\r\n    return () => unsubscribe.forEach((fcn) => fcn());\r\n  }, [username]);\r\n\r\n  return (\r\n    <Container className={classes.root}>\r\n      <Navigation />\r\n\r\n      <PrimaryColumn>\r\n        <Header backButton={true} title={username} />\r\n        <Profile user={user} />\r\n        {user === undefined && <ProfileNotFound username={username} />}\r\n        <Timeline tweets={timeline} />\r\n      </PrimaryColumn>\r\n\r\n      <SecondaryColumn>\r\n        <Search />\r\n        <Activity />\r\n        <FollowMenu />\r\n      </SecondaryColumn>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport ChatBubbleOutlineIcon from \"@material-ui/icons/ChatBubbleOutline\";\r\nimport CachedIcon from \"@material-ui/icons/Cached\";\r\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\r\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\r\nimport ShareIcon from \"@material-ui/icons/Share\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Avatar from \"../layout/Avatar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Image from \"../layout/Image\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { useHistory } from \"react-router\";\r\nimport { firestore } from \"../../firebase/config\";\r\nimport firebase from \"firebase/app\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { fetchUser } from \"../../services/firebase\";\r\nimport CreateTweet from \"./CreateTweet\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  tweet: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    padding: theme.spacing(2, 2, 0, 2),\r\n  },\r\n  content: {\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n  },\r\n  tweetInfo: {\r\n    display: \"flex\",\r\n    gap: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  tweetMessage: {\r\n    whiteSpace: \"pre-line\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  tweetImage: {\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  iconButton: {\r\n    padding: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nexport default function MainTweet({ tweet, replies }) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const history = useHistory();\r\n\r\n  const [user, setUser] = useState(null);\r\n  const { user: currentUser } = useSelector((state) => state.user);\r\n\r\n  const [likes, setLikes] = useState(null);\r\n  const [toggleLiked, setToggledLiked] = useState(null);\r\n  const [retweets, setRetweets] = useState(null);\r\n  const [toggleRetweet, setToggledRetweet] = useState(null);\r\n\r\n  const date = tweet?.timestamp?.toDate();\r\n\r\n  const handleToggledLiked = async () => {\r\n    setToggledLiked((toggleLiked) => !toggleLiked);\r\n\r\n    await firestore\r\n      .collection(\"tweets\")\r\n      .doc(tweet.id)\r\n      .update({\r\n        likes: toggleLiked\r\n          ? firebase.firestore.FieldValue.arrayRemove(currentUser.username)\r\n          : firebase.firestore.FieldValue.arrayUnion(currentUser.username),\r\n      });\r\n\r\n    await firestore\r\n      .collection(\"users\")\r\n      .doc(currentUser.username)\r\n      .update({\r\n        likes: toggleLiked\r\n          ? firebase.firestore.FieldValue.arrayRemove(tweet.id)\r\n          : firebase.firestore.FieldValue.arrayUnion(tweet.id),\r\n      });\r\n\r\n    setLikes((likes) => (toggleLiked ? likes - 1 : likes + 1));\r\n  };\r\n\r\n  const handleToggledRetweet = async () => {\r\n    setToggledRetweet((toggleRetweet) => !toggleRetweet);\r\n\r\n    await firestore\r\n      .collection(\"tweets\")\r\n      .doc(tweet.id)\r\n      .update({\r\n        retweets: toggleRetweet\r\n          ? firebase.firestore.FieldValue.arrayRemove(currentUser.username)\r\n          : firebase.firestore.FieldValue.arrayUnion(currentUser.username),\r\n      });\r\n\r\n    await firestore\r\n      .collection(\"users\")\r\n      .doc(currentUser.username)\r\n      .update({\r\n        retweets: toggleRetweet\r\n          ? firebase.firestore.FieldValue.arrayRemove(tweet.id)\r\n          : firebase.firestore.FieldValue.arrayUnion(tweet.id),\r\n      });\r\n\r\n    setRetweets((retweets) => (toggleRetweet ? retweets - 1 : retweets + 1));\r\n  };\r\n\r\n  useEffect(async () => {\r\n    setUser(await fetchUser(tweet?.username));\r\n    setLikes(tweet?.likes?.length);\r\n    setToggledLiked(currentUser?.likes?.includes(tweet?.id));\r\n    setRetweets(tweet?.retweets?.length);\r\n    setToggledRetweet(currentUser?.retweets?.includes(tweet?.id));\r\n  }, [tweet]);\r\n\r\n  const tweetOptions = [\r\n    {\r\n      text: \"Reply\",\r\n      icon: <ChatBubbleOutlineIcon />,\r\n      value: replies,\r\n      action: null,\r\n      color: \"#fff\",\r\n      activated: false,\r\n    },\r\n    {\r\n      text: \"Retweet\",\r\n      icon: <CachedIcon />,\r\n      value: retweets,\r\n      action: handleToggledRetweet,\r\n      color: \"rgb(0, 186, 124)\",\r\n      activated: toggleRetweet,\r\n    },\r\n    {\r\n      text: \"Like\",\r\n      icon: toggleLiked ? <FavoriteIcon /> : <FavoriteBorderIcon />,\r\n      value: likes,\r\n      action: handleToggledLiked,\r\n      color: \"rgb(249, 24, 128)\",\r\n      activated: toggleLiked,\r\n    },\r\n    {\r\n      text: \"Share\",\r\n      icon: <ShareIcon />,\r\n      value: null,\r\n      action: null,\r\n      color: \"#fff\",\r\n      activated: false,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      {tweet && user && (\r\n        <>\r\n          <div className={classes.tweet}>\r\n            <Box className={classes.content}>\r\n              <Box className={classes.tweetInfo}>\r\n                <Avatar\r\n                  className={classes.avatar}\r\n                  src={user.profilePictureURL}\r\n                ></Avatar>\r\n                <Box>\r\n                  <Link\r\n                    variant=\"body1\"\r\n                    color=\"textPrimary\"\r\n                    component={\"span\"}\r\n                    onClick={() => history.push(`/profile/${tweet.username}`)}\r\n                  >\r\n                    <Box fontWeight=\"fontWeightMedium\">{user.name}</Box>\r\n                  </Link>\r\n                  <Typography\r\n                    variant=\"body1\"\r\n                    color=\"textSecondary\"\r\n                    component={\"span\"}\r\n                    noWrap={true}\r\n                  >\r\n                    {`@${user.username}`}\r\n                  </Typography>\r\n                </Box>\r\n              </Box>\r\n\r\n              {tweet.message?.length > 0 && (\r\n                <Box fontSize={24} className={classes.tweetMessage}>\r\n                  {tweet.message}\r\n                </Box>\r\n              )}\r\n\r\n              <Image\r\n                src={tweet.imageUrl}\r\n                className={classes.tweetImage}\r\n                contain={false}\r\n              />\r\n\r\n              <Box mb={2}>\r\n                {[\r\n                  date.toLocaleString(\"en-US\", {\r\n                    hour: \"numeric\",\r\n                    minute: \"numeric\",\r\n                    hour12: true,\r\n                  }),\r\n                  \"  \",\r\n                  `${date.toLocaleString(\"en-us\", {\r\n                    month: \"short\",\r\n                  })} ${date.getDate()}, ${date.getFullYear()}`,\r\n                  \"  \",\r\n                  \"Twitter Web App\",\r\n                ].map((text, i) => (\r\n                  <Typography\r\n                    key={i}\r\n                    variant=\"body1\"\r\n                    color=\"textSecondary\"\r\n                    component={\"span\"}\r\n                    noWrap={true}\r\n                  >\r\n                    {text}\r\n                  </Typography>\r\n                ))}\r\n              </Box>\r\n\r\n              <Divider />\r\n\r\n              <Box display=\"flex\" alignItems=\"center\" my={2}>\r\n                {tweetOptions.slice(0, -1).map((option, i) => (\r\n                  <Box mr={2} key={i}>\r\n                    <Typography variant=\"body1\" component=\"span\">\r\n                      {option.value}\r\n                    </Typography>\r\n                    <Typography\r\n                      variant=\"body1\"\r\n                      component=\"span\"\r\n                      color=\"textSecondary\"\r\n                    >\r\n                      {\" \"}\r\n                      {option.text}\r\n                    </Typography>\r\n                  </Box>\r\n                ))}\r\n              </Box>\r\n\r\n              <Divider />\r\n\r\n              <Box display=\"flex\" justifyContent=\"space-around\" my={0.75}>\r\n                {tweetOptions.map((option, i) => (\r\n                  <IconButton\r\n                    style={{\r\n                      color: option.activated\r\n                        ? option.color\r\n                        : theme.palette.text.secondary,\r\n                    }}\r\n                    onClick={option.action}\r\n                    className={classes.iconButton}\r\n                  >\r\n                    {React.cloneElement(option.icon, {\r\n                      style: { fontSize: 24 },\r\n                    })}\r\n                  </IconButton>\r\n                ))}\r\n              </Box>\r\n              <Divider />\r\n            </Box>\r\n          </div>\r\n\r\n          <CreateTweet parent={tweet?.id} />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { firestore } from \"../../firebase/config\";\r\nimport Navigation from \"../layout/Navigation\";\r\nimport PrimaryColumn from \"../PrimaryColumn/PrimaryColumn\";\r\nimport Header from \"../PrimaryColumn/Header\";\r\nimport MainTweet from \"../PrimaryColumn/MainTweet\";\r\nimport Timeline from \"../PrimaryColumn/Timeline\";\r\nimport SecondaryColumn from \"../SecondaryColumn/SecondaryColumn\";\r\nimport Search from \"../SecondaryColumn/Search\";\r\nimport Activity from \"../SecondaryColumn/Activity\";\r\nimport FollowMenu from \"../SecondaryColumn/FollowMenu\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { useParams } from \"react-router\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    \"&::before, &::after\": {\r\n      content: '\"\"',\r\n      margin: \"auto\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function TweetPage() {\r\n  const [timeline, setTimeline] = useState(null);\r\n\r\n  const { tweetid } = useParams();\r\n\r\n  const [tweet, setTweet] = useState(null);\r\n\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    firestore\r\n      .collection(\"tweets\")\r\n      .doc(tweetid)\r\n      .get()\r\n      .then((doc) => {\r\n        const data = doc.data();\r\n        const id = tweetid;\r\n        setTweet({ id, ...data });\r\n      });\r\n\r\n    const unsubscribe = firestore\r\n      .collection(\"tweets\")\r\n      .where(\"parent\", \"==\", tweetid)\r\n      .orderBy(\"timestamp\", \"desc\")\r\n      .onSnapshot((snapshot) => {\r\n        setTimeline(\r\n          snapshot.docs.map((doc) => {\r\n            const data = doc.data();\r\n            const id = doc.id;\r\n            return { id, ...data };\r\n          })\r\n        );\r\n      });\r\n\r\n    return () => unsubscribe();\r\n  }, [tweetid]);\r\n\r\n  return (\r\n    <Container className={classes.root}>\r\n      <Navigation />\r\n\r\n      <PrimaryColumn>\r\n        <Header title=\"Tweet\" backButton={true} />\r\n        <MainTweet tweet={tweet} replies={timeline?.length} />\r\n        <Timeline tweets={timeline} />\r\n      </PrimaryColumn>\r\n\r\n      <SecondaryColumn>\r\n        <Search />\r\n        <Activity />\r\n        <FollowMenu />\r\n      </SecondaryColumn>\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport Navigation from \"../layout/Navigation\";\r\nimport RoundButton from \"../layout/RoundButton\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    \"&::before, &::after\": {\r\n      content: '\"\"',\r\n      margin: \"auto\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function NotFound() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <Container className={classes.root}>\r\n      <Navigation />\r\n\r\n      <Box flexGrow={1} mt={8} textAlign=\"center\">\r\n        <Box mb={4}>\r\n          <Typography\r\n            variant=\"body2\"\r\n            color=\"textSecondary\"\r\n          >{`Hmm...this page doesnt exist.`}</Typography>\r\n        </Box>\r\n        <RoundButton\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          onClick={history.goBack}\r\n        >\r\n          Go back\r\n        </RoundButton>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import { Route, Redirect } from \"react-router-dom\";\r\nimport { useSelector} from \"react-redux\";\r\n\r\nexport default function PrivateRoute({ component: Component, ...rest }) {\r\n  const { firebaseUser, user } = useSelector((state) => state.user);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        return firebaseUser || user === undefined ? (\r\n          user && <Component {...props} />\r\n        ) : (\r\n          <Redirect to=\"/login\" />\r\n        );\r\n      }}\r\n    />\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport FollowButton from \"../layout/FollowButton\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { fetchPeopleToFollow } from \"../../services/firebase\";\r\nimport Avatar from \"../layout/Avatar\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  list: {\r\n    padding: 0,\r\n  },\r\n  listItem: {\r\n    padding: theme.spacing(1.5, 2),\r\n  },\r\n  showMore: {\r\n    padding: theme.spacing(1.5, 2),\r\n    borderRadius: theme.spacing(0, 0, 2, 2),\r\n  },\r\n  avatar: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function LargeFollowMenu() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const { user: currentUser } = useSelector((state) => state.user);\r\n  const [users, setUsers] = useState(null);\r\n\r\n  useEffect(async () => {\r\n    setUsers(await fetchPeopleToFollow(currentUser));\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {users && (\r\n        <List className={classes.list}>\r\n          {users &&\r\n            users.map((user, i) => (\r\n              <ListItem\r\n                key={i}\r\n                className={classes.listItem}\r\n                button\r\n                onClick={() => history.push(`/profile/${user.username}`)}\r\n              >\r\n                <Avatar\r\n                  src={user.profilePictureURL}\r\n                  className={classes.avatar}\r\n                />\r\n                <ListItemText secondary={`@${user.username}`}>\r\n                  <Typography variant=\"body2\" component={\"span\"}>\r\n                    <Box fontWeight=\"fontWeightMedium\">{user.name}</Box>\r\n                  </Typography>\r\n                </ListItemText>\r\n                <ListItemSecondaryAction>\r\n                  <FollowButton size=\"small\" user={user}>\r\n                    Follow\r\n                  </FollowButton>\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n            ))}\r\n        </List>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import Navigation from \"../layout/Navigation\";\r\nimport PrimaryColumn from \"../PrimaryColumn/PrimaryColumn\";\r\nimport Header from \"../PrimaryColumn/Header\";\r\nimport SecondaryColumn from \"../SecondaryColumn/SecondaryColumn\";\r\nimport Search from \"../SecondaryColumn/Search\";\r\nimport Activity from \"../SecondaryColumn/Activity\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport LargeFollowMenu from \"../PrimaryColumn/LargeFollowMenu\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    \"&::before, &::after\": {\r\n      content: '\"\"',\r\n      margin: \"auto\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function Connect() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Container className={classes.root}>\r\n      <Navigation />\r\n\r\n      <PrimaryColumn>\r\n        <Header title=\"Connect\" backButton={true} />\r\n        <LargeFollowMenu />\r\n      </PrimaryColumn>\r\n\r\n      <SecondaryColumn>\r\n        <Search />\r\n        <Activity />\r\n      </SecondaryColumn>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Avatar from \"../layout/Avatar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { fetchActivity } from \"../../services/firebase\";\r\nimport timeDifference from \"../../services/timeDifference\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  list: {\r\n    padding: 0,\r\n  },\r\n  listItem: {\r\n    padding: theme.spacing(1.5, 2),\r\n  },\r\n  showMore: {\r\n    padding: theme.spacing(1.5, 2),\r\n    borderRadius: theme.spacing(0, 0, 2, 2),\r\n  },\r\n  avatar: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function LargeActivity() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const [activity, setActivity] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = fetchActivity(setActivity);\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  return (\r\n    <List className={classes.list}>\r\n      {activity &&\r\n        activity.map((item, i) => (\r\n          <ListItem\r\n            key={i}\r\n            className={classes.listItem}\r\n            onClick={() => history.push(`/profile/${item.username}`)}\r\n            button\r\n          >\r\n            <Avatar className={classes.avatar} src={item?.profilePictureURL} />\r\n            <ListItemText secondary={timeDifference(item.timestamp?.toDate())}>\r\n              <Typography variant=\"body2\">{item?.message}</Typography>\r\n            </ListItemText>\r\n          </ListItem>\r\n        ))}\r\n    </List>\r\n  );\r\n}\r\n","import Navigation from \"../layout/Navigation\";\r\nimport PrimaryColumn from \"../PrimaryColumn/PrimaryColumn\";\r\nimport Header from \"../PrimaryColumn/Header\";\r\nimport SecondaryColumn from \"../SecondaryColumn/SecondaryColumn\";\r\nimport Search from \"../SecondaryColumn/Search\";\r\nimport FollowMenu from \"../SecondaryColumn/FollowMenu\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport LargeActivity from \"../PrimaryColumn/LargeActivity\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    \"&::before, &::after\": {\r\n      content: '\"\"',\r\n      margin: \"auto\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function ActivityPage() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Container className={classes.root}>\r\n      <Navigation />\r\n\r\n      <PrimaryColumn>\r\n        <Header title=\"Activity\" backButton={true} />\r\n        <LargeActivity />\r\n      </PrimaryColumn>\r\n\r\n      <SecondaryColumn>\r\n        <Search />\r\n        <FollowMenu />\r\n      </SecondaryColumn>\r\n    </Container>\r\n  );\r\n}\r\n","import Navigation from \"../layout/Navigation\";\r\nimport PrimaryColumn from \"../PrimaryColumn/PrimaryColumn\";\r\nimport Header from \"../PrimaryColumn/Header\";\r\nimport SecondaryColumn from \"../SecondaryColumn/SecondaryColumn\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { useSelector } from \"react-redux\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    \"&::before, &::after\": {\r\n      content: '\"\"',\r\n      margin: \"auto\",\r\n    },\r\n  },\r\n  list: {\r\n    padding: 0,\r\n  },\r\n}));\r\n\r\nexport default function Settings() {\r\n  const classes = useStyles();\r\n  const { user } = useSelector((state) => state.user);\r\n\r\n  const listItems = [\r\n    { title: \"Username\", info: `@${user?.username}` },\r\n    { title: \"Name\", info: user?.name },\r\n    { title: \"Email\", info: user?.email },\r\n    { title: \"Account Creation\", info: user?.createdAt.toDate().toString() },\r\n  ];\r\n\r\n  return (\r\n    <Container className={classes.root}>\r\n      <Navigation />\r\n\r\n      <PrimaryColumn>\r\n        <Header title=\"Settings\" backButton={true} />\r\n        <List className={classes.list}>\r\n          {listItems.map((item, i) => (\r\n            <ListItem key={i} className={classes.listItem} button>\r\n              <ListItemText secondary={item.info}>\r\n                <Typography variant=\"body2\" component={\"span\"}>\r\n                  <Box fontWeight=\"fontWeightMedium\">{item.title}</Box>\r\n                </Typography>\r\n              </ListItemText>\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </PrimaryColumn>\r\n\r\n      <SecondaryColumn copyright={false}></SecondaryColumn>\r\n    </Container>\r\n  );\r\n}\r\n","import { useEffect, useState } from \"react\";\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport Login from \"./components/auth/Login\";\nimport Signup from \"./components/auth/Signup\";\nimport Home from \"./components/pages/Home\";\nimport Explore from \"./components/pages/Explore\";\nimport ProfilePage from \"./components/pages/ProfilePage\";\nimport TweetPage from \"./components/pages/TweetPage\";\nimport NotFound from \"./components/pages/NotFound\";\nimport PrivateRoute from \"./components/helpers/PrivateRoute\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { ThemeProvider } from \"@material-ui/core/styles\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setUser, setFirebaseUser } from \"./redux/actions\";\nimport { firestore, auth } from \"./firebase/config\";\nimport Connect from \"./components/pages/Connect\";\nimport ActivityPage from \"./components/pages/ActivityPage\";\nimport Settings from \"./components/pages/Settings\";\n\nfunction App() {\n  const { theme } = useSelector((state) => state.theme);\n  const { firebaseUser } = useSelector((state) => state.user);\n  const [loading, setLoading] = useState(true);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(async (user) => {\n      dispatch(setFirebaseUser(user));\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, [dispatch]);\n\n  useEffect(async () => {\n    let unsubscribe = () => {};\n    if (firebaseUser) {\n      try {\n        const username = await firestore\n          .collection(\"uid\")\n          .doc(firebaseUser.uid)\n          .get()\n          .then((snapshot) => snapshot.data().username);\n        //get user info\n        unsubscribe = firestore\n          .collection(\"users\")\n          .doc(username)\n          .onSnapshot((snapshot) => {\n            const userInfo = { ...snapshot.data(), username: username };\n            dispatch(setUser(userInfo));\n          });\n      } catch {\n        dispatch(setUser(undefined));\n      }\n    }\n    return () => unsubscribe();\n  }, [firebaseUser, dispatch]);\n\n  return (\n    <>\n      <Router>\n        <ThemeProvider theme={theme}>\n          <CssBaseline />\n          {!loading && (\n            <Switch>\n              <Route exact path=\"/\">\n                <Redirect to=\"/home\" />\n              </Route>\n              <PrivateRoute path=\"/home\" component={Home} />\n              <PrivateRoute path=\"/explore\" component={Explore} />\n              <PrivateRoute path=\"/profile/:username\" component={ProfilePage} />\n              <PrivateRoute path=\"/settings\" component={Settings} />\n              <PrivateRoute path=\"/connect\" component={Connect} />\n              <PrivateRoute path=\"/activity\" component={ActivityPage} />\n              <PrivateRoute path=\"/tweet/:tweetid\" component={TweetPage} />\n              <Route path=\"/login\" component={Login} />\n              <Route path=\"/signup\" component={Signup} />\n              <Route path=\"*\" component={NotFound} />\n            </Switch>\n          )}\n        </ThemeProvider>\n      </Router>\n    </>\n  );\n}\n\nexport default App;\n","const initialState = {\r\n  firebaseUser: null,\r\n  user: null,\r\n};\r\n\r\nexport default function userReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case \"SET_USER\":\r\n      return { ...state, user: action.payload };\r\n    case \"SET_FIREBASE_USER\":\r\n      return { ...state, firebaseUser: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { createTheme } from \"@material-ui/core/styles\";\r\n\r\nconst darkTheme = createTheme({\r\n  palette: {\r\n    type: \"dark\",\r\n    primary: {\r\n      main: \"rgb(29, 161, 242)\",\r\n      contrastText: \"#fff\",\r\n    },\r\n    secondary: {\r\n      main: \"#fff\",\r\n      contrastText: \"rgb(15, 20, 25)\",\r\n    },\r\n    background: {\r\n      default: \"#000000\",\r\n      paper: \"#15181c\",\r\n    },\r\n    divider: \"rgba(255,255,255,0.20)\",\r\n  },\r\n  typography: {\r\n    body2: {\r\n      fontSize: \".925rem\",\r\n    },\r\n  },\r\n  shadows: [\"none\"],\r\n});\r\n\r\nconst dimTheme = createTheme({\r\n  palette: {\r\n    type: \"dark\",\r\n    primary: {\r\n      main: \"rgb(29, 161, 242)\",\r\n      contrastText: \"#fff\",\r\n    },\r\n    secondary: {\r\n      main: \"#fff\",\r\n      contrastText: \"rgb(15, 20, 25)\",\r\n    },\r\n    background: {\r\n      default: \"rgb(21, 32, 43)\",\r\n      paper: \"rgb(25, 39, 52)\",\r\n    },\r\n    divider: \"rgba(255,255,255,0.20)\",\r\n  },\r\n  typography: {\r\n    body2: {\r\n      fontSize: \".925rem\",\r\n    },\r\n  },\r\n  shadows: [\"none\"],\r\n});\r\n\r\nconst lightTheme = createTheme({\r\n  palette: {\r\n    type: \"light\",\r\n    primary: {\r\n      main: \"rgb(29, 161, 242)\",\r\n      contrastText: \"#fff\",\r\n    },\r\n    secondary: {\r\n      main: \"rgb(15, 20, 25)\",\r\n      contrastText: \"#fff\",\r\n    },\r\n    background: {\r\n      default: \"#fff\",\r\n      paper: \"rgb(247, 249, 249)\",\r\n    },\r\n    text: {\r\n      secondary: \"rgba(0, 0, 0, 0.70)\",\r\n    },\r\n    divider: \"rgba(0,0,0,0.075)\",\r\n  },\r\n  typography: {\r\n    body2: {\r\n      fontSize: \".925rem\",\r\n    },\r\n  },\r\n  shadows: [\"none\"],\r\n});\r\n\r\nconst initialState = {\r\n  type: \"dark\",\r\n  theme: darkTheme,\r\n};\r\n\r\nconst themeReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"TOGGLE_THEME\":\r\n      if (state.type === \"dark\") return { type: \"dim\", theme: { ...dimTheme } };\r\n      if (state.type === \"dim\")\r\n        return { type: \"light\", theme: { ...lightTheme } };\r\n      if (state.type === \"light\")\r\n        return { type: \"dark\", theme: { ...darkTheme } };\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default themeReducer;\r\n","import { combineReducers } from \"redux\";\r\nimport userReducer from \"./user\";\r\nimport themeReducer from \"./theme\";\r\n\r\nconst Reducers = combineReducers({\r\n  user: userReducer,\r\n  theme: themeReducer,\r\n});\r\n\r\nexport default Reducers;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport rootReducer from \"./redux/reducers\";\n\nconst store = createStore(rootReducer, applyMiddleware(thunk));\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}